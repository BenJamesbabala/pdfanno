{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 2c365fda68a7e351c184","webpack:///./src/pdfanno.js","webpack:///./src/page/util/anno.js","webpack:///./src/page/ui/browseButton.js","webpack:///./src/page/util/display.js","webpack:///./src/page/ui/pdfDropdown.js","webpack:///./src/page/util/dropdown.js","webpack:///./src/page/ui/primaryAnnoDropdown.js","webpack:///./src/page/ui/annoListDropdown.js","webpack:///./src/core/src/utils/position.js","webpack:///./src/page/ui/referenceAnnoDropdown.js","webpack:///./src/page/ui/annotationTools.js","webpack:///./src/page/util/window.js","webpack:///./src/index.html","webpack:///./src/pdfanno.css?319e","webpack:///./src/pdfanno.css","webpack:///./~/css-loader/lib/css-base.js","webpack:///./~/style-loader/addStyles.js"],"names":["browseButton","pdfDropdown","primaryAnnoDropdown","annoListDropdown","referenceAnnoDropdown","annotationsTools","require","window","fileMap","adjustViewerSize","removeEventListener","addEventListener","startApplication","iframeWindow","$","get","contentWindow","currentAnnoToolType","location","search","indexOf","setup","disableAnnotateTools","enableAnnotateTool","clearAllAnnotations","PDFAnnoCore","UI","disableRect","disableSpan","disableRelation","disableViewMode","type","enableSpan","enableRelation","enableRect","localStorage","removeItem","on","val","files","ev","target","error","isValidDirectorySelect","alert","current","getCurrentFileNames","getContents","pdfs","annos","setPDFDropdownList","setAnnoDropdownList","loadData","then","display","currentDisplay","newFileMap","console","log","Object","keys","name","pdfName","pdf","text","each","index","element","$elm","find","removeClass","primaryAnnotationName","promise1","Promise","resolve","names","referenceAnnotationNames","colors","referenceAnnotationColors","changed","filter","i","found","spectrum","promise2","length","join","all","_excludeBaseDirName","filePath","frgms","split","hasClass","annoName","push","color","toHexString","relativePath","webkitRelativePath","file","match","remove","forEach","pdfPath","snipet","append","html","fileName","snipet1","snipet2","reject","promises","p","map","fileReader","FileReader","onload","event","result","readAsDataURL","concat","annotation","readAsText","displayAnnotation","reloadPDFViewer","setupColorPicker","isPrimary","reload","annotations","primaryIndex","annoPath","filename","setItem","paperData","primary","getStoreAdapter","importAnnotations","document","createEvent","initCustomEvent","dispatchEvent","showPaletteOnly","showPalette","hideAfterPaletteSelect","palette","slice","Math","floor","elm","off","bind","$this","e","currentTarget","currentPDFName","confirm","addClass","click","resetCheckPrimaryAnnoDropdown","resetCheckReferenceAnnoDropdown","currentAnnoName","annotationContainer","getAllAnnotations","a","readOnly","sort","a1","a2","_getY","elements","icon","direction","y","pageNumber","uuid","page","data","PDFView","id","findById","highlight","setTimeout","dehighlight","rectangles","y1","convertToExportY","paddingTop","paddingBetweenPages","meta","getPageSize","pageHeight","height","yInPage","pdfView","viewBox","pdfViewer","getPageView","viewport","size","width","toggleClass","annoNames","$button","blur","downloadAnnotation","deleteAllAnnotations","userAnswer","destroy","documentId","getFileName","url","deleteAnnotations","exportData","blob","Blob","blobURL","URL","createObjectURL","createElement","body","appendChild","download","_getDownloadFileName","href","parentNode","removeChild","pdfFileName","listenWindowLeaveEvent","unlistenWindowLeaveEvent","resizeHandler","innerHeight","offset","top","css","height1","height2","height3","height4"],"mappings":"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,iCAAgC,UAAU,EAAE;AAC5C,E;;;;;;ACpBA;AACA;;;AAGA;AACA,4CAA2C,qBAAqB,2BAA2B,KAAK,iIAAiI,oBAAoB,sBAAsB,KAAK,+EAA+E,0CAA0C,4BAA4B,KAAK,0CAA0C,0BAA0B,KAAK,yCAAyC,8BAA8B,yBAAyB,yBAAyB,KAAK,sCAAsC,mBAAmB,qBAAqB,KAAK,gCAAgC,sBAAsB,KAAK,sDAAsD,yBAAyB,KAAK,iEAAiE,mBAAmB,qBAAqB,KAAK,qBAAqB,sBAAsB,KAAK,0BAA0B,wBAAwB,KAAK;;AAExiC;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAgB,iBAAiB;AACjC;AACA;AACA,yCAAwC,gBAAgB;AACxD,KAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA,aAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACjDA;AACA;AACA;AACA;AACA,qBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAgB,mBAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,sBAAsB;AACtC;AACA;AACA,mBAAkB,2BAA2B;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA,kBAAiB,2BAA2B;AAC5C;AACA;AACA,SAAQ,uBAAuB;AAC/B;AACA;AACA,IAAG;AACH;AACA,kBAAiB,uBAAuB;AACxC;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA,iCAAgC,sBAAsB;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA,GAAE;AACF;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,wDAAuD;AACvD;;AAEA,8BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;AACA","file":"./dist/pdfanno.bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"PDFAnnoCore\"] = factory();\n\telse\n\t\troot[\"PDFAnnoCore\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 2c365fda68a7e351c184\n **/","require(\"file?name=dist/index.html!./index.html\");\r\nrequire(\"!style!css!./pdfanno.css\");\r\n\r\nimport { enableAnnotateTool, disableAnnotateTools, clearAllAnnotations } from './page/util/anno';\r\n\r\nimport * as browseButton from './page/ui/browseButton';\r\nimport * as pdfDropdown from './page/ui/pdfDropdown';\r\nimport * as primaryAnnoDropdown from './page/ui/primaryAnnoDropdown';\r\nimport * as annoListDropdown from './page/ui/annoListDropdown';\r\nimport * as referenceAnnoDropdown from './page/ui/referenceAnnoDropdown';\r\nimport * as annotationsTools from './page/ui/annotationTools';\r\n\r\nimport {\r\n    displayAnnotation,\r\n    reloadPDFViewer,\r\n    setupColorPicker\r\n} from './page/util/display';\r\n\r\nimport {\r\n    listenWindowLeaveEvent,\r\n    unlistenWindowLeaveEvent,\r\n    resizeHandler\r\n} from './page/util/window';\r\n\r\n/**\r\n * The data which is loaded via `Browse` button.\r\n */\r\nwindow.fileMap = {};\r\n\r\n/**\r\n    Adjust the height of viewer according to window height.\r\n*/\r\nfunction adjustViewerSize() {\r\n    window.removeEventListener('resize', resizeHandler);\r\n    window.addEventListener('resize', resizeHandler);\r\n    resizeHandler();\r\n}\r\n\r\n/**\r\n * Start PDFAnno Application.\r\n */\r\nfunction startApplication() {\r\n\r\n    // Alias for convenience.\r\n    window.iframeWindow = $('#viewer iframe').get(0).contentWindow;\r\n\r\n    iframeWindow.addEventListener('DOMContentLoaded', () => {\r\n\r\n        // Adjust the height of viewer.\r\n        adjustViewerSize();\r\n\r\n        // Reset the confirm dialog at leaving page.\r\n        unlistenWindowLeaveEvent();\r\n    });\r\n\r\n    iframeWindow.addEventListener('annotationrendered', () => {\r\n\r\n        // Restore the status of AnnoTools.\r\n        disableAnnotateTools();\r\n        enableAnnotateTool(window.currentAnnoToolType);\r\n    });\r\n\r\n    // Set the confirm dialog when leaving a page.\r\n    iframeWindow.addEventListener('annotationUpdated', listenWindowLeaveEvent);\r\n}\r\n\r\n/**\r\n *  The entry point.\r\n */\r\nwindow.addEventListener('DOMContentLoaded', e => {\r\n\r\n    // Delete prev annotations.\r\n    if (location.search.indexOf('debug') === -1) {\r\n        clearAllAnnotations();\r\n    }\r\n\r\n    // Start application.\r\n    startApplication();\r\n\r\n    // Setup UI parts.\r\n    browseButton.setup();\r\n    pdfDropdown.setup();\r\n    primaryAnnoDropdown.setup();\r\n    referenceAnnoDropdown.setup();\r\n    annoListDropdown.setup();\r\n    annotationsTools.setup();\r\n\r\n    window.addEventListener('restartApp', startApplication);\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/pdfanno.js\n **/","/**\r\n * Annotations.\r\n */\r\n\r\n\r\n\r\n/**\r\n    Disable annotation tool buttons.\r\n*/\r\nexport function disableAnnotateTools() {\r\n    window.iframeWindow.PDFAnnoCore.UI.disableRect();\r\n    window.iframeWindow.PDFAnnoCore.UI.disableSpan();\r\n    window.iframeWindow.PDFAnnoCore.UI.disableRelation();\r\n    window.iframeWindow.PDFAnnoCore.UI.disableViewMode();\r\n}\r\n\r\n/**\r\n * Enable an annotation tool.\r\n */\r\nexport function enableAnnotateTool(type) {\r\n\r\n    if (type === 'span') {\r\n        window.iframeWindow.PDFAnnoCore.UI.enableSpan();\r\n\r\n    } else if (type === 'one-way') {\r\n        window.iframeWindow.PDFAnnoCore.UI.enableRelation('one-way');\r\n\r\n    } else if (type === 'two-way') {\r\n        window.iframeWindow.PDFAnnoCore.UI.enableRelation('two-way');\r\n\r\n    } else if (type === 'link') {\r\n        window.iframeWindow.PDFAnnoCore.UI.enableRelation('link');\r\n\r\n    } else if (type === 'rect') {\r\n        window.iframeWindow.PDFAnnoCore.UI.enableRect();\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Clear the all annotations from the view and storage.\r\n */\r\nexport function clearAllAnnotations() {\r\n    localStorage.removeItem('_pdfanno_containers');\r\n    localStorage.removeItem('_pdfanno_primary_annoname');\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/util/anno.js\n **/","/**\r\n * UI parts - Browse button.\r\n */\r\nimport { reloadPDFViewer, setupColorPicker, displayAnnotation } from '../util/display';\r\nimport { enableAnnotateTool, disableAnnotateTools, clearAllAnnotations } from '../util/anno';\r\n\r\n/**\r\n * Setup the behavior of a Browse Button.\r\n */\r\nexport function setup() {\r\n\r\n    // Enable to select the same directory twice.\r\n    $('.js-file :file').on('click', ev => {\r\n        $('input[type=\"file\"]').val(null);\r\n    });\r\n\r\n    $('.js-file :file').on('change', ev => {\r\n\r\n        const files = ev.target.files;\r\n\r\n        let error = isValidDirectorySelect(files);\r\n        if (error) {\r\n            return alert(error);\r\n        }\r\n\r\n        // Get current visuals.\r\n        const current = getCurrentFileNames();\r\n\r\n        // Get contents.\r\n        const { pdfs, annos } = getContents(files);\r\n\r\n        // Setup PDF Dropdown.\r\n        setPDFDropdownList(pdfs);\r\n\r\n        // Setup Anno Dropdown.\r\n        setAnnoDropdownList(annos);\r\n\r\n        // Initialize PDF Viewer.\r\n        clearAllAnnotations();\r\n\r\n        // Load data.\r\n        loadData(pdfs, annos).then(() => {\r\n\r\n            // Display a PDF and annotations.\r\n            display(current, fileMap);\r\n\r\n        });\r\n\r\n    });\r\n\r\n}\r\n\r\nfunction display(currentDisplay, newFileMap) {\r\n\r\n    console.log('files:', Object.keys(newFileMap));\r\n\r\n    let name;\r\n\r\n    // PDF.\r\n    name = currentDisplay.pdfName;\r\n    if (name && newFileMap[name]) {\r\n        window.pdf = fileMap[name];\r\n        window.pdfName = currentDisplay.pdfName;\r\n\r\n        $('#dropdownPdf .js-text').text(name);\r\n        $('#dropdownPdf a').each((index, element) => {\r\n            let $elm = $(element);\r\n            if ($elm.find('.js-pdfname').text() === name) {\r\n                $elm.find('.fa-check').removeClass('no-visible');\r\n            }\r\n        });\r\n\r\n    } else {\r\n        delete window.pdf;\r\n        delete window.pdfName;\r\n    }\r\n\r\n    // Primary Annotation.\r\n    name = currentDisplay.primaryAnnotationName;\r\n    let promise1 = Promise.resolve();\r\n    if (name && newFileMap[name]) {\r\n\r\n        $('#dropdownAnnoPrimary .js-text').text(name);\r\n        $('#dropdownAnnoPrimary a').each((index, element) => {\r\n            let $elm = $(element);\r\n            if ($elm.find('.js-annoname').text() === name) {\r\n                $elm.find('.fa-check').removeClass('no-visible');\r\n            }\r\n        });\r\n\r\n        promise1 = displayAnnotation(true, false);\r\n    }\r\n\r\n    // Reference Annotations.\r\n    let names = currentDisplay.referenceAnnotationNames;\r\n    let colors = currentDisplay.referenceAnnotationColors;\r\n    let changed = false;\r\n    names = names.filter((name, i) => {\r\n        let found = false;\r\n        if (newFileMap[name]) {\r\n            $('#dropdownAnnoReference a').each((index, element) => {\r\n                let $elm = $(element);\r\n                if ($elm.find('.js-annoname').text() === name) {\r\n                    $elm.find('.fa-check').removeClass('no-visible');\r\n                    $elm.find('.js-anno-palette').spectrum('set', colors[i]);\r\n\r\n                    console.log('color: ', colors[i]);\r\n\r\n                    found = true;\r\n                }\r\n            });\r\n        }\r\n        return found;\r\n    });\r\n    let promise2 = Promise.resolve();\r\n    if (names.length > 0) {\r\n        $('#dropdownAnnoReference .js-text').text(names.join(','));\r\n        promise2 = displayAnnotation(false, false);\r\n    }\r\n\r\n    // Reload page.\r\n    Promise.all([promise1, promise2]).then(reloadPDFViewer);\r\n\r\n}\r\n\r\n/**\r\n * Get a filename from a path.\r\n */\r\nfunction _excludeBaseDirName(filePath) {\r\n    let frgms = filePath.split('/');\r\n    return frgms[frgms.length - 1];\r\n}\r\n\r\n/**\r\n * Get the file names which currently are displayed.\r\n */\r\nfunction getCurrentFileNames() {\r\n\r\n    let text;\r\n\r\n    // a PDF name.\r\n    text = $('#dropdownPdf .js-text').text();\r\n    let pdfName = (text !== 'Select PDF file' ? text : null);\r\n\r\n    // a Primary anno.\r\n    text = $('#dropdownAnnoPrimary .js-text').text();\r\n    let primaryAnnotationName = (text !== 'Select Anno file' ? text : null);\r\n\r\n\r\n    let referenceAnnotationNames = [];\r\n    let referenceAnnotationColors = [];\r\n    $('#dropdownAnnoReference a').each((index, element) => {\r\n        let $elm = $(element);\r\n        if ($elm.find('.fa-check').hasClass('no-visible') === false) {\r\n            let annoName = $elm.find('.js-annoname').text(); // TODO こういうのはJS変数として持っておいたほうがいいかも（選択済のものについて）\r\n            referenceAnnotationNames.push(annoName);\r\n            let color = $elm.find('.js-anno-palette').spectrum('get').toHexString();\r\n            referenceAnnotationColors.push(color);\r\n        }\r\n    });\r\n\r\n    return {\r\n        pdfName,\r\n        primaryAnnotationName,\r\n        referenceAnnotationNames,\r\n        referenceAnnotationColors\r\n    };\r\n}\r\n\r\n/**\r\n * Check whether the directory the user specified is valid.\r\n */\r\nfunction isValidDirectorySelect(files) {\r\n\r\n    // Error, if no contents exits.\r\n    if (!files || files.length === 0) {\r\n        return 'Not files specified';\r\n    }\r\n\r\n    // Error, if the user select a file - not a directory.\r\n    let relativePath = files[0].webkitRelativePath;\r\n    if (!relativePath) {\r\n        return 'Please select a directory, NOT a file';\r\n    }\r\n\r\n    // OK.\r\n    return null;\r\n}\r\n\r\n/**\r\n * Extract PDFs and annotations from files the user specified.\r\n */\r\nfunction getContents(files) {\r\n    let pdfs = [];\r\n    let annos = [];\r\n\r\n    for (let i = 0; i < files.length; i++) {\r\n\r\n        let file = files[i];\r\n        let relativePath = file.webkitRelativePath;\r\n\r\n        let frgms = relativePath.split('/');\r\n        if (frgms.length > 2) {\r\n            console.log('SKIP:', relativePath);\r\n            continue;\r\n        }\r\n        console.log('relativePath:', relativePath);\r\n\r\n        // Get files only PDFs or Anno files.\r\n        if (relativePath.match(/\\.pdf$/i)) {\r\n            pdfs.push(file);\r\n        } else if (relativePath.match(/\\.anno$/i)) {\r\n            annos.push(file);\r\n        }\r\n    }\r\n\r\n    return {\r\n        pdfs,\r\n        annos\r\n    };\r\n}\r\n\r\n/**\r\n * Setup the contents of the dropdown for PDFs.\r\n */\r\nfunction setPDFDropdownList(pdfs) {\r\n\r\n    $('#dropdownPdf .js-text').text('Select PDF file');\r\n    $('#dropdownPdf li').remove();\r\n    pdfs.forEach(file => {\r\n        let pdfPath = _excludeBaseDirName(file.webkitRelativePath);\r\n        let snipet = `\r\n            <li>\r\n                <a href=\"#\">\r\n                    <i class=\"fa fa-check no-visible\" aria-hidden=\"true\"></i>&nbsp;\r\n                    <span class=\"js-pdfname\">${pdfPath}</span>\r\n                </a>\r\n            </li>\r\n        `;\r\n        $('#dropdownPdf ul').append(snipet);\r\n    });\r\n}\r\n\r\n/**\r\n * Setup the contents of the dropdowns for primary/reference annotations.\r\n */\r\nfunction setAnnoDropdownList(annos) {\r\n\r\n    // Reset.\r\n    $('#dropdownAnnoPrimary ul').html('');\r\n    $('#dropdownAnnoReference ul').html('');\r\n    $('#dropdownAnnoPrimary .js-text').text('Select Anno file');\r\n    $('#dropdownAnnoReference .js-text').text('Select reference files');\r\n\r\n    // Setup anno / reference dropdown.\r\n    annos.forEach(file => {\r\n\r\n        let fileName = _excludeBaseDirName(file.webkitRelativePath);\r\n\r\n        let snipet1 = `\r\n            <li>\r\n                <a href=\"#\">\r\n                    <i class=\"fa fa-check no-visible\" aria-hidden=\"true\"></i>\r\n                    <span class=\"js-annoname\">${fileName}</span>\r\n                </a>\r\n            </li>\r\n        `;\r\n        $('#dropdownAnnoPrimary ul').append(snipet1);\r\n\r\n        let snipet2 = `\r\n            <li>\r\n                <a href=\"#\">\r\n                    <i class=\"fa fa-check no-visible\" aria-hidden=\"true\"></i>\r\n                    <input type=\"text\" name=\"color\" class=\"js-anno-palette\" autocomplete=\"off\">\r\n                    <span class=\"js-annoname\">${fileName}</span>\r\n                </a>\r\n            </li>\r\n        `;\r\n        $('#dropdownAnnoReference ul').append(snipet2);\r\n    });\r\n\r\n    // Setup color pallets.\r\n    setupColorPicker();\r\n}\r\n\r\n/**\r\n * Load PDFs and Annotations from the directory the user specified.\r\n */\r\nfunction loadData(pdfs, annos) {\r\n\r\n    window.fileMap = {};\r\n\r\n    return new Promise((resolve, reject) => {\r\n\r\n        let promises = [];\r\n\r\n        // Load pdfs.\r\n        let p = pdfs.map(file => {\r\n            return new Promise((resolve, reject) => {\r\n                let fileReader = new FileReader();\r\n                fileReader.onload = event => {\r\n                    let pdf = event.target.result;\r\n                    let fileName = _excludeBaseDirName(file.webkitRelativePath);\r\n                    fileMap[fileName] = pdf;\r\n                    resolve();\r\n                }\r\n                fileReader.readAsDataURL(file);\r\n            });\r\n        });\r\n        promises = promises.concat(p);\r\n\r\n        // Load annos.\r\n        p = annos.map(file => {\r\n            return new Promise((resolve, reject) => {\r\n                let fileReader = new FileReader();\r\n                fileReader.onload = event => {\r\n                    let annotation = event.target.result;\r\n                    let fileName = _excludeBaseDirName(file.webkitRelativePath);\r\n                    fileMap[fileName] = annotation;\r\n                    resolve();\r\n                }\r\n                fileReader.readAsText(file);\r\n            });\r\n        });\r\n        promises = promises.concat(p);\r\n\r\n        // Wait for complete.\r\n        Promise.all(promises).then(resolve);\r\n\r\n    });\r\n\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/ui/browseButton.js\n **/","\r\n\r\n/**\r\n * Display annotations an user selected.\r\n */\r\nexport function displayAnnotation(isPrimary, reload=true) {\r\n\r\n    let annotations = [];\r\n    let colors = [];\r\n    let primaryIndex = -1;\r\n\r\n    // Primary annotation.\r\n    if (isPrimary) {\r\n        $('#dropdownAnnoPrimary a').each((index, element) => {\r\n            let $elm = $(element);\r\n            if ($elm.find('.fa-check').hasClass('no-visible') === false) {\r\n                let annoPath = $elm.find('.js-annoname').text();\r\n                if (!fileMap[annoPath]) {\r\n                    console.log('ERROR');\r\n                    return;\r\n                }\r\n                primaryIndex = 0;\r\n                annotations.push(fileMap[annoPath]);\r\n                let color = null; // Use the default color used for edit.\r\n                colors.push(color);\r\n\r\n                let filename = annoPath.split('/')[annoPath.split('/').length - 1];\r\n                localStorage.setItem('_pdfanno_primary_annoname', filename);\r\n                console.log('filename:', filename);\r\n            }\r\n        });\r\n    }\r\n\r\n    // Reference annotations.\r\n    if (!isPrimary) {\r\n        $('#dropdownAnnoReference a').each((index, element) => {\r\n            let $elm = $(element);\r\n            if ($elm.find('.fa-check').hasClass('no-visible') === false) {\r\n                let annoPath = $elm.find('.js-annoname').text();\r\n                if (!fileMap[annoPath]) {\r\n                    console.log('ERROR');\r\n                    return;\r\n                }\r\n                annotations.push(fileMap[annoPath]);\r\n                let color = $elm.find('.js-anno-palette').spectrum('get').toHexString();\r\n                console.log(color);\r\n                colors.push(color);\r\n            }\r\n        });\r\n    }\r\n\r\n    console.log('colors:', colors);\r\n\r\n    // Create import data.\r\n    let paperData = {\r\n        primary : primaryIndex,\r\n        colors,\r\n        annotations\r\n    };\r\n\r\n    // Pass the data to pdf-annotatejs.\r\n    window.iframeWindow.PDFAnnoCore.getStoreAdapter().importAnnotations(paperData, isPrimary).then(result => {\r\n\r\n        if (reload) {\r\n            // Reload the viewer.\r\n            reloadPDFViewer();\r\n        }\r\n\r\n        return true;\r\n    });\r\n\r\n}\r\n\r\n/**\r\n * Reload PDF Viewer.\r\n */\r\nexport function reloadPDFViewer() {\r\n\r\n    // Reload pdf.js.\r\n    $('#viewer iframe').remove();\r\n    $('#viewer').html('<iframe src=\"./pages/viewer.html\" class=\"anno-viewer\" frameborder=\"0\"></iframe>');\r\n\r\n    // Restart.\r\n    var event = document.createEvent('CustomEvent');\r\n    event.initCustomEvent('restartApp', true, true, null);\r\n    window.dispatchEvent(event);\r\n}\r\n\r\n/**\r\n * Setup the color pickers.\r\n */\r\nexport function setupColorPicker() {\r\n\r\n    const colors = [\r\n        'rgb(255, 128, 0)', 'hsv 100 70 50', 'yellow', 'blanchedalmond',\r\n        'red', 'green', 'blue', 'violet'\r\n    ];\r\n\r\n    // Setup colorPickers.\r\n    $('.js-anno-palette').spectrum({\r\n        showPaletteOnly        : true,\r\n        showPalette            : true,\r\n        hideAfterPaletteSelect : true,\r\n        palette                : [\r\n            colors.slice(0, Math.floor(colors.length/2)),\r\n            colors.slice(Math.floor(colors.length/2), colors.length)\r\n        ]\r\n    });\r\n    // Set initial color.\r\n    $('.js-anno-palette').each((i, elm) => {\r\n        $(elm).spectrum('set', colors[ i % colors.length ]);\r\n    });\r\n\r\n    // Setup behavior.\r\n    $('.js-anno-palette').off('change').on('change', displayAnnotation.bind(null, false));\r\n}\r\n\r\n\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/util/display.js\n **/","/**\r\n * UI parts - PDF Dropdown.\r\n */\r\nimport { reloadPDFViewer } from '../util/display';\r\nimport { clearAllAnnotations } from '../util/anno';\r\nimport { resetCheckPrimaryAnnoDropdown, resetCheckReferenceAnnoDropdown } from '../util/dropdown';\r\n\r\n/**\r\n * Setup the dropdown of PDFs.\r\n */\r\nexport function setup() {\r\n\r\n    $('#dropdownPdf').on('click', 'a', e => {\r\n\r\n        let $this = $(e.currentTarget);\r\n        let pdfPath = $this.find('.js-pdfname').text();\r\n\r\n        let currentPDFName = $('#dropdownPdf .js-text').text();\r\n        if (currentPDFName === pdfPath) {\r\n            console.log('Not reload. the pdf are same.');\r\n            return;\r\n        }\r\n\r\n        // Confirm to override.\r\n        if (currentPDFName !== 'Select PDF file') {\r\n            if (!window.confirm('Are you sure to load another PDF ?')) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        $('#dropdownPdf .js-text').text(pdfPath);\r\n\r\n        $('#dropdownPdf .fa-check').addClass('no-visible');\r\n        $this.find('.fa-check').removeClass('no-visible');\r\n\r\n        if (!fileMap[pdfPath]) {\r\n            return false;\r\n        }\r\n\r\n        // Reset Primary/Reference anno dropdowns, and data.\r\n        clearAllAnnotations();\r\n        resetCheckPrimaryAnnoDropdown();\r\n        resetCheckReferenceAnnoDropdown();\r\n\r\n        // reload.\r\n        window.pdf = fileMap[pdfPath];\r\n        let fileName = pdfPath.split('/')[pdfPath.split('/').length - 1];\r\n        window.pdfName = fileName;\r\n        reloadPDFViewer();\r\n\r\n        // Close dropdown.\r\n        $('#dropdownPdf').click();\r\n\r\n        return false;\r\n    });\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/ui/pdfDropdown.js\n **/","/**\r\n * Utility functions for dropdown UIs.\r\n */\r\n\r\nexport function resetCheckPrimaryAnnoDropdown() {\r\n    $('#dropdownAnnoPrimary .js-text').text('Select Anno file');\r\n    $('#dropdownAnnoPrimary .fa-check').addClass('no-visible');\r\n}\r\n\r\nexport function resetCheckReferenceAnnoDropdown() {\r\n    $('#dropdownAnnoReference .js-text').text('Select reference files');\r\n    $('#dropdownAnnoReference .fa-check').addClass('no-visible');\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/util/dropdown.js\n **/","/**\r\n * UI parts - Primary Annotation Dropdown.\r\n */\r\nimport { displayAnnotation } from '../util/display';\r\n\r\n/**\r\n * Setup a click action of the Primary Annotation Dropdown.\r\n */\r\nexport function setup() {\r\n\r\n    $('#dropdownAnnoPrimary').on('click', 'a', e => {\r\n\r\n        let $this = $(e.currentTarget);\r\n        let annoName = $this.find('.js-annoname').text();\r\n\r\n        let currentAnnoName = $('#dropdownAnnoPrimary .js-text').text();\r\n        if (currentAnnoName === annoName) {\r\n            console.log('Not reload. the anno are same.');\r\n            return;\r\n        }\r\n\r\n        // Confirm to override.\r\n        if (currentAnnoName !== 'Select Anno file') {\r\n            if (!window.confirm('Are you sure to load another Primary Annotation ?')) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        $('#dropdownAnnoPrimary .js-text').text(annoName);\r\n        console.log(annoName);\r\n\r\n        $('#dropdownAnnoPrimary .fa-check').addClass('no-visible');\r\n        $this.find('.fa-check').removeClass('no-visible');\r\n\r\n        // if (!fileMap[annoName]) {\r\n        //     return false;\r\n        // }\r\n\r\n        // reload.\r\n        displayAnnotation(true);\r\n\r\n        // Close\r\n        $('#dropdownAnnoPrimary').click();\r\n\r\n        return false;\r\n    });\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/ui/primaryAnnoDropdown.js\n **/","/**\r\n * UI parts - Anno List Dropdown.\r\n */\r\nimport { convertToExportY } from '../../core/src/utils/position';\r\n\r\n/**\r\n * Setup the dropdown for Anno list.\r\n */\r\nexport function setup() {\r\n\r\n    // Show the list of primary annotations.\r\n    $('#dropdownAnnoList').on('click', () => {\r\n\r\n        // Get displayed annotations.\r\n        let annotations = iframeWindow.annotationContainer.getAllAnnotations();\r\n\r\n        // Filter only Primary.\r\n        annotations = annotations.filter(a => {\r\n            return !a.readOnly;\r\n        });\r\n\r\n        // Sort by offsetY.\r\n        annotations = annotations.sort((a1, a2) => {\r\n            return _getY(a1) - _getY(a2);\r\n        });\r\n\r\n        // Create elements.\r\n        let elements = annotations.map(a => {\r\n\r\n            let icon;\r\n            if (a.type === 'span') {\r\n                icon = '<i class=\"fa fa-pencil\"></i>';\r\n            } else if (a.type === 'relation' && a.direction === 'one-way') {\r\n                icon = '<i class=\"fa fa-long-arrow-right\"></i>';\r\n            } else if (a.type === 'relation' && a.direction === 'two-way') {\r\n                icon = '<i class=\"fa fa-arrows-h\"></i>';\r\n            } else if (a.type === 'relation' && a.direction === 'link') {\r\n                icon = '<i class=\"fa fa-minus\"></i>';\r\n            } else if (a.type === 'area') {\r\n                icon = '<i class=\"fa fa-square-o\"></i>';\r\n            }\r\n\r\n            let y = _getY(a);\r\n            let { pageNumber } = convertToExportY(y);\r\n\r\n\r\n            let snipet = `\r\n                <li>\r\n                    <a href=\"#\" data-page=\"${pageNumber}\" data-id=\"${a.uuid}\">\r\n                        ${icon}&nbsp;&nbsp;\r\n                        <span>${a.text || ''}</span>\r\n                    </a>\r\n                </li>\r\n            `;\r\n\r\n            return snipet;\r\n        });\r\n\r\n        $('#dropdownAnnoList ul').html(elements);\r\n\r\n    });\r\n\r\n    // Jump to the page that the selected annotation is at.\r\n    $('#dropdownAnnoList').on('click', 'a', e => {\r\n\r\n        // Jump to the page anno rendered at.\r\n        let page = $(e.currentTarget).data('page');\r\n        console.log('page:', page);\r\n        iframeWindow.PDFView.page = page;\r\n\r\n        // Highlight.\r\n        let id = $(e.currentTarget).data('id');\r\n        let annotation = iframeWindow.annotationContainer.findById(id);\r\n        if (annotation) {\r\n            annotation.highlight();\r\n            setTimeout(() => {\r\n                annotation.dehighlight();\r\n            }, 1000);\r\n        }\r\n\r\n        // Close the dropdown.\r\n        $('#dropdownAnnoList').click();\r\n    });\r\n\r\n}\r\n\r\n/**\r\n * Get the y position in the annotation.\r\n */\r\nfunction _getY(annotation) {\r\n\r\n    if (annotation.rectangles) {\r\n        return annotation.rectangles[0].y;\r\n\r\n    } else if (annotation.y1) {\r\n        return annotation.y1;\r\n\r\n    } else {\r\n        return annotation.y;\r\n    }\r\n}\r\n\r\n\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/ui/annoListDropdown.js\n **/","/**\r\n * The padding of page top.\r\n */\r\nconst paddingTop = 9;\r\n\r\n/**\r\n * The padding between pages.\r\n */\r\nconst paddingBetweenPages = 9;\r\n\r\n/**\r\n * Convert the `y` position from the local coords to exported json.\r\n */\r\nexport function convertToExportY(y) {\r\n\r\n    let meta = getPageSize();\r\n\r\n    y -= paddingTop;\r\n\r\n    let pageHeight = meta.height + paddingBetweenPages;\r\n\r\n    let pageNumber = Math.floor(y / pageHeight) + 1;\r\n    let yInPage = y - (pageNumber-1) * pageHeight;\r\n\r\n    return { pageNumber, y : yInPage };\r\n}\r\n\r\n/**\r\n * Get a page size of a single PDF page.\r\n */\r\nfunction getPageSize() {\r\n\r\n    let pdfView = window.PDFView || iframeWindow.PDFView;\r\n\r\n    let viewBox = pdfView.pdfViewer.getPageView(0).viewport.viewBox;\r\n    let size = { width : viewBox[2], height : viewBox[3] };\r\n    return size;\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/src/utils/position.js\n **/","/**\r\n * UI parts - Reference Annotation Dropdown.\r\n */\r\nimport { displayAnnotation } from '../util/display';\r\n\r\n/**\r\n * Setup a click action of the Reference Annotation Dropdown.\r\n */\r\nexport function setup() {\r\n\r\n    $('#dropdownAnnoReference').on('click', 'a', e => {\r\n\r\n        let $this = $(e.currentTarget);\r\n\r\n        $this.find('.fa-check').toggleClass('no-visible');\r\n\r\n        let annoNames = [];\r\n        $('#dropdownAnnoReference a').each((index, element) => {\r\n            let $elm = $(element);\r\n            if ($elm.find('.fa-check').hasClass('no-visible') === false) {\r\n                annoNames.push($elm.find('.js-annoname').text());\r\n            }\r\n        });\r\n        if (annoNames.length > 0) {\r\n            $('#dropdownAnnoReference .js-text').text(annoNames.join(','));\r\n        } else {\r\n            $('#dropdownAnnoReference .js-text').text('Select reference files');\r\n        }\r\n\r\n        displayAnnotation(false);\r\n\r\n        return false;\r\n\r\n    });\r\n\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/ui/referenceAnnoDropdown.js\n **/","/**\r\n * UI parts - Annotations Tools.\r\n */\r\nimport { reloadPDFViewer } from '../util/display';\r\nimport { unlistenWindowLeaveEvent } from '../util/window';\r\nimport { enableAnnotateTool, disableAnnotateTools } from '../util/anno';\r\n\r\n\r\n/**\r\n    Set the behavior of the tool buttons for annotations.\r\n*/\r\nexport function setup() {\r\n\r\n    window.currentAnnoToolType = 'view';\r\n\r\n    $('.js-tool-btn').off('click').on('click', (e) => {\r\n\r\n        disableAnnotateTools();\r\n\r\n        let $button = $(e.currentTarget);\r\n\r\n        if ($button.hasClass('active')) {\r\n            $button\r\n                .removeClass('active')\r\n                .blur();\r\n            return false;\r\n        }\r\n\r\n        $('.js-tool-btn.active').removeClass('active');\r\n        $button.addClass('active');\r\n\r\n        let type = $button.data('type');\r\n\r\n        window.currentAnnoToolType = type;\r\n\r\n        enableAnnotateTool(type);\r\n\r\n        return false;\r\n    });\r\n\r\n    $('.js-tool-btn2').off('click').on('click', (e) => {\r\n\r\n        let $button = $(e.currentTarget);\r\n        let type = $button.data('type');\r\n\r\n        $button.blur();\r\n\r\n        if (type === 'download') {\r\n            downloadAnnotation();\r\n\r\n        } else if (type === 'delete') {\r\n            deleteAllAnnotations();\r\n        }\r\n\r\n        return false;\r\n    });\r\n\r\n}\r\n\r\n// /**\r\n//     Disable annotation tool buttons.\r\n// */\r\n// function disableAnnotateTools() {\r\n//     window.iframeWindow.PDFAnnoCore.UI.disableRect();\r\n//     window.iframeWindow.PDFAnnoCore.UI.disableSpan();\r\n//     window.iframeWindow.PDFAnnoCore.UI.disableRelation();\r\n//     window.iframeWindow.PDFAnnoCore.UI.disableViewMode();\r\n// }\r\n\r\n/**\r\n * Delete all annotations.\r\n */\r\nfunction deleteAllAnnotations() {\r\n\r\n    // Comfirm to user.\r\n    let userAnswer = window.confirm('Are you sure to clear the current annotations?');\r\n    if (!userAnswer) {\r\n        return;\r\n    }\r\n\r\n    iframeWindow.annotationContainer.destroy();\r\n\r\n    let documentId = window.iframeWindow.getFileName(window.iframeWindow.PDFView.url);\r\n    window.iframeWindow.PDFAnnoCore.getStoreAdapter().deleteAnnotations(documentId).then(() => {\r\n        reloadPDFViewer();\r\n    });\r\n}\r\n\r\n/**\r\n * Export the primary annotation data for download.\r\n */\r\nfunction downloadAnnotation() {\r\n\r\n    window.iframeWindow.PDFAnnoCore.getStoreAdapter().exportData().then(annotations => {\r\n        let blob = new Blob([annotations]);\r\n        let blobURL = window.URL.createObjectURL(blob);\r\n        let a = document.createElement('a');\r\n        document.body.appendChild(a); // for firefox working correctly.\r\n        a.download = _getDownloadFileName();\r\n        a.href = blobURL;\r\n        a.click();\r\n        a.parentNode.removeChild(a);\r\n    });\r\n\r\n    unlistenWindowLeaveEvent();\r\n}\r\n\r\n/**\r\n * Get the anno file name for download.\r\n */\r\nfunction _getDownloadFileName() {\r\n\r\n    // The name of Primary Annotation.\r\n    let primaryAnnotationName;\r\n    $('#dropdownAnnoPrimary a').each((index, element) => {\r\n        let $elm = $(element);\r\n        if ($elm.find('.fa-check').hasClass('no-visible') === false) {\r\n            primaryAnnotationName = $elm.find('.js-annoname').text();\r\n        }\r\n    });\r\n    if (primaryAnnotationName) {\r\n        return primaryAnnotationName;\r\n    }\r\n\r\n    // The name of PDF.\r\n    let pdfFileName = iframeWindow.getFileName(iframeWindow.PDFView.url);\r\n    return pdfFileName.split('.')[0] + '.anno';\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/ui/annotationTools.js\n **/","/**\r\n * Utility for window.\r\n */\r\n\r\n/**\r\n * Set the confirm dialog at leaving the page.\r\n */\r\nexport function listenWindowLeaveEvent() {\r\n    $(window).off('beforeunload').on('beforeunload', () => {\r\n        return 'You don\\'t save the annotations yet.\\nAre you sure to leave ?';\r\n    });\r\n}\r\n\r\n/**\r\n * Unset the confirm dialog at leaving the page.\r\n */\r\nexport function unlistenWindowLeaveEvent() {\r\n    $(window).off('beforeunload');\r\n}\r\n\r\n/**\r\n * Resize the height of elements adjusting to the window.\r\n */\r\nexport function resizeHandler() {\r\n\r\n    // PDFViewer.\r\n    let height = $(window).innerHeight() - $('#viewer').offset().top;\r\n    $('#viewer iframe').css('height', `${height}px`);\r\n\r\n    // Dropdown for PDF.\r\n    let height1 = $(window).innerHeight() - ($('#dropdownPdf ul').offset().top || 120);\r\n    $('#dropdownPdf ul').css('max-height', `${height1 - 20}px`);\r\n\r\n    // Dropdown for Primary Annos.\r\n    let height2 = $(window).innerHeight() - ($('#dropdownAnnoPrimary ul').offset().top || 120);\r\n    $('#dropdownAnnoPrimary ul').css('max-height', `${height2 - 20}px`);\r\n\r\n    // Dropdown for Anno list.\r\n    let height3 = $(window).innerHeight() - ($('#dropdownAnnoList ul').offset().top || 120);\r\n    $('#dropdownAnnoList ul').css('max-height', `${height3 - 20}px`);\r\n\r\n    // Dropdown for Reference Annos.\r\n    let height4 = $(window).innerHeight() - ($('#dropdownAnnoReference ul').offset().top || 120);\r\n    $('#dropdownAnnoReference ul').css('max-height', `${height4 - 20}px`);\r\n\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/util/window.js\n **/","module.exports = __webpack_public_path__ + \"dist/index.html\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/file-loader?name=dist/index.html!./src/index.html\n ** module id = 12\n ** module chunks = 0\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../node_modules/css-loader/index.js!./pdfanno.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../node_modules/css-loader/index.js!./pdfanno.css\", function() {\n\t\t\tvar newContent = require(\"!!./../node_modules/css-loader/index.js!./pdfanno.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/style-loader!./~/css-loader!./src/pdfanno.css\n ** module id = 13\n ** module chunks = 0\n **/","exports = module.exports = require(\"./../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"@charset 'utf-8';\\r\\n\\r\\n.no-visible {\\r\\n    visibility: hidden;\\r\\n}\\r\\n\\r\\n/**\\r\\n * Viewer size.\\r\\n * This height will be override to fit the browser height (by app.js).\\r\\n */\\r\\n.anno-viewer {\\r\\n    width: 100%;\\r\\n    height: 500px;\\r\\n}\\r\\n\\r\\n/**\\r\\n * Annotation Select UI Layout.\\r\\n */\\r\\n.anno-select-layout {}\\r\\n.anno-select-layout .row:first-child {\\r\\n    margin-bottom: 10px;\\r\\n}\\r\\n.anno-select-layout [type=\\\"radio\\\"] {\\r\\n    margin-right: 5px;\\r\\n}\\r\\n.anno-select-layout [type=\\\"file\\\"] {\\r\\n    display: inline-block;\\r\\n    margin-left: 5px;\\r\\n    line-height: 1em;\\r\\n}\\r\\n.anno-select-layout .sp-replacer {\\r\\n    padding: 0;\\r\\n    border: none;\\r\\n}\\r\\n.anno-select-layout .sp-dd {\\r\\n    display: none;\\r\\n}\\r\\n\\r\\n/**\\r\\n * Dropdown.\\r\\n */\\r\\n.dropdown-menu {\\r\\n    overflow: scroll;\\r\\n}\\r\\n\\r\\n/**\\r\\n * Color picker.\\r\\n */\\r\\n.anno-ui .sp-replacer {\\r\\n    padding: 0;\\r\\n    border: none;\\r\\n}\\r\\n.anno-ui .sp-dd {\\r\\n    display: none;\\r\\n}\\r\\n.anno-ui .sp-preview {\\r\\n    margin-right: 0;\\r\\n}\\r\\n\\r\\n\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./src/pdfanno.css\n ** module id = 14\n ** module chunks = 0\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\nmodule.exports = function() {\r\n\tvar list = [];\r\n\r\n\t// return the list of modules as css string\r\n\tlist.toString = function toString() {\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar item = this[i];\r\n\t\t\tif(item[2]) {\r\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.join(\"\");\r\n\t};\r\n\r\n\t// import a list of modules into the list\r\n\tlist.i = function(modules, mediaQuery) {\r\n\t\tif(typeof modules === \"string\")\r\n\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\tvar alreadyImportedModules = {};\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar id = this[i][0];\r\n\t\t\tif(typeof id === \"number\")\r\n\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t}\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar item = modules[i];\r\n\t\t\t// skip already imported module\r\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn list;\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader/lib/css-base.js\n ** module id = 15\n ** module chunks = 0 1\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar stylesInDom = {},\r\n\tmemoize = function(fn) {\r\n\t\tvar memo;\r\n\t\treturn function () {\r\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\treturn memo;\r\n\t\t};\r\n\t},\r\n\tisOldIE = memoize(function() {\r\n\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t}),\r\n\tgetHeadElement = memoize(function () {\r\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t}),\r\n\tsingletonElement = null,\r\n\tsingletonCounter = 0,\r\n\tstyleElementsInsertedAtTop = [];\r\n\r\nmodule.exports = function(list, options) {\r\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\r\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t}\r\n\r\n\toptions = options || {};\r\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t// tags it will allow on a page\r\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\r\n\t// By default, add <style> tags to the bottom of <head>.\r\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\r\n\r\n\tvar styles = listToStyles(list);\r\n\taddStylesToDom(styles, options);\r\n\r\n\treturn function update(newList) {\r\n\t\tvar mayRemove = [];\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tdomStyle.refs--;\r\n\t\t\tmayRemove.push(domStyle);\r\n\t\t}\r\n\t\tif(newList) {\r\n\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\taddStylesToDom(newStyles, options);\r\n\t\t}\r\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction addStylesToDom(styles, options) {\r\n\tfor(var i = 0; i < styles.length; i++) {\r\n\t\tvar item = styles[i];\r\n\t\tvar domStyle = stylesInDom[item.id];\r\n\t\tif(domStyle) {\r\n\t\t\tdomStyle.refs++;\r\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t}\r\n\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar parts = [];\r\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction listToStyles(list) {\r\n\tvar styles = [];\r\n\tvar newStyles = {};\r\n\tfor(var i = 0; i < list.length; i++) {\r\n\t\tvar item = list[i];\r\n\t\tvar id = item[0];\r\n\t\tvar css = item[1];\r\n\t\tvar media = item[2];\r\n\t\tvar sourceMap = item[3];\r\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\tif(!newStyles[id])\r\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\telse\r\n\t\t\tnewStyles[id].parts.push(part);\r\n\t}\r\n\treturn styles;\r\n}\r\n\r\nfunction insertStyleElement(options, styleElement) {\r\n\tvar head = getHeadElement();\r\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\r\n\tif (options.insertAt === \"top\") {\r\n\t\tif(!lastStyleElementInsertedAtTop) {\r\n\t\t\thead.insertBefore(styleElement, head.firstChild);\r\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\r\n\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\r\n\t\t} else {\r\n\t\t\thead.appendChild(styleElement);\r\n\t\t}\r\n\t\tstyleElementsInsertedAtTop.push(styleElement);\r\n\t} else if (options.insertAt === \"bottom\") {\r\n\t\thead.appendChild(styleElement);\r\n\t} else {\r\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\r\n\t}\r\n}\r\n\r\nfunction removeStyleElement(styleElement) {\r\n\tstyleElement.parentNode.removeChild(styleElement);\r\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\r\n\tif(idx >= 0) {\r\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\r\n\t}\r\n}\r\n\r\nfunction createStyleElement(options) {\r\n\tvar styleElement = document.createElement(\"style\");\r\n\tstyleElement.type = \"text/css\";\r\n\tinsertStyleElement(options, styleElement);\r\n\treturn styleElement;\r\n}\r\n\r\nfunction createLinkElement(options) {\r\n\tvar linkElement = document.createElement(\"link\");\r\n\tlinkElement.rel = \"stylesheet\";\r\n\tinsertStyleElement(options, linkElement);\r\n\treturn linkElement;\r\n}\r\n\r\nfunction addStyle(obj, options) {\r\n\tvar styleElement, update, remove;\r\n\r\n\tif (options.singleton) {\r\n\t\tvar styleIndex = singletonCounter++;\r\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\r\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t} else if(obj.sourceMap &&\r\n\t\ttypeof URL === \"function\" &&\r\n\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\ttypeof Blob === \"function\" &&\r\n\t\ttypeof btoa === \"function\") {\r\n\t\tstyleElement = createLinkElement(options);\r\n\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t\tif(styleElement.href)\r\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t};\r\n\t} else {\r\n\t\tstyleElement = createStyleElement(options);\r\n\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t};\r\n\t}\r\n\r\n\tupdate(obj);\r\n\r\n\treturn function updateStyle(newObj) {\r\n\t\tif(newObj) {\r\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\treturn;\r\n\t\t\tupdate(obj = newObj);\r\n\t\t} else {\r\n\t\t\tremove();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nvar replaceText = (function () {\r\n\tvar textStore = [];\r\n\r\n\treturn function (index, replacement) {\r\n\t\ttextStore[index] = replacement;\r\n\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t};\r\n})();\r\n\r\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\tvar css = remove ? \"\" : obj.css;\r\n\r\n\tif (styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t} else {\r\n\t\tvar cssNode = document.createTextNode(css);\r\n\t\tvar childNodes = styleElement.childNodes;\r\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\tif (childNodes.length) {\r\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t} else {\r\n\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction applyToTag(styleElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\r\n\tif(media) {\r\n\t\tstyleElement.setAttribute(\"media\", media)\r\n\t}\r\n\r\n\tif(styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = css;\r\n\t} else {\r\n\t\twhile(styleElement.firstChild) {\r\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t}\r\n\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t}\r\n}\r\n\r\nfunction updateLink(linkElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(sourceMap) {\r\n\t\t// http://stackoverflow.com/a/26603875\r\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t}\r\n\r\n\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\r\n\tvar oldSrc = linkElement.href;\r\n\r\n\tlinkElement.href = URL.createObjectURL(blob);\r\n\r\n\tif(oldSrc)\r\n\t\tURL.revokeObjectURL(oldSrc);\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/style-loader/addStyles.js\n ** module id = 16\n ** module chunks = 0 1\n **/"],"sourceRoot":""}