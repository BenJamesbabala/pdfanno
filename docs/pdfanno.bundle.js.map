{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 57adb3249b5eb888b928","webpack:///./src/pdfanno.js","webpack:///./src/core/src/utils/position.js","webpack:///./src/index.html","webpack:///./src/pdfanno.css?319e","webpack:///./src/pdfanno.css","webpack:///./~/css-loader/lib/css-base.js","webpack:///./~/style-loader/addStyles.js"],"names":["require","fileMap","resizeHandler","height","$","window","innerHeight","offset","top","css","height1","height2","height3","height4","adjustViewerSize","removeEventListener","addEventListener","disableAnnotateTools","iframeWindow","PDFAnnoCore","UI","disableRect","disableSpan","disableRelation","disableViewMode","initializeAnnoToolButtons","off","on","e","$button","currentTarget","type","data","removeClass","addClass","enableViewMode","enableSpan","enableRelation","enableRect","blur","downloadAnnotation","deleteAllAnnotations","click","_getDownloadFileName","primaryAnnotationName","each","index","element","$elm","find","hasClass","text","pdfFileName","getFileName","PDFView","url","split","getStoreAdapter","exportData","then","blob","Blob","annotations","blobURL","URL","createObjectURL","a","document","createElement","body","appendChild","download","href","parentNode","removeChild","unlistenWindowLeaveEvent","reloadPDFViewer","remove","html","startApplication","userAnswer","confirm","annotationContainer","destroy","documentId","deleteAnnotations","setupColorPicker","colors","spectrum","showPaletteOnly","showPalette","hideAfterPaletteSelect","palette","slice","Math","floor","length","i","elm","displayAnnotation","bind","isPrimary","primaryIndex","annoPath","console","log","push","color","filename","localStorage","setItem","toHexString","paperData","primary","importAnnotations","listenWindowLeaveEvent","clearAnnotationDropdowns","_excludeBaseDirName","filePath","frgms","setupBrowseButton","val","files","ev","target","pdfs","annos","file","relativePath","webkitRelativePath","alert","match","forEach","pdfPath","snipet","append","clearAllAnnotations","removeItem","fileReader","FileReader","onload","pdf","event","result","fileName","readAsDataURL","annotation","readAsText","snipet1","snipet2","setupPdfDropdown","$this","currentPDFName","pdfName","setupPrimaryAnnoDropdown","annoName","currentAnnoName","setupReferenceAnnoDropdown","toggleClass","annoNames","join","_getY","rectangles","y","y1","setupAnnoListDropdown","getAllAnnotations","filter","readOnly","sort","a1","a2","elements","map","icon","direction","pageNumber","uuid","page","id","findById","highlight","setTimeout","dehighlight","get","contentWindow","location","search","indexOf","convertToExportY","paddingTop","paddingBetweenPages","meta","getPageSize","pageHeight","yInPage","pdfView","viewBox","pdfViewer","getPageView","viewport","size","width"],"mappings":"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AAiB,mBAAmB,GAAG,8BAA8B,oBAAoB,GAAG,4CAA4C,uBAAuB,GAAG,uDAAuD,iBAAiB,mBAAmB,GAAG,mBAAmB,oBAAoB,GAAG,wBAAwB,sBAAsB,GAAG;;AAEt7B;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAgB,iBAAiB;AACjC;AACA;AACA,yCAAwC,gBAAgB;AACxD,KAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA,aAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACjDA;AACA;AACA;AACA;AACA,qBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAgB,mBAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,sBAAsB;AACtC;AACA;AACA,mBAAkB,2BAA2B;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA,kBAAiB,2BAA2B;AAC5C;AACA;AACA,SAAQ,uBAAuB;AAC/B;AACA;AACA,IAAG;AACH;AACA,kBAAiB,uBAAuB;AACxC;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA,iCAAgC,sBAAsB;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA,GAAE;AACF;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,wDAAuD;AACvD;;AAEA,8BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;AACA","file":"./dist/pdfanno.bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"PDFAnnoCore\"] = factory();\n\telse\n\t\troot[\"PDFAnnoCore\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 57adb3249b5eb888b928\n **/","require(\"file?name=dist/index.html!./index.html\");\nrequire(\"!style!css!./pdfanno.css\");\n\nimport { convertToExportY } from './core/src/utils/position';\n\n\n/**\n * The data which is loaded via `Browse` button.\n */\nlet fileMap = {};\n\n/**\n * Resize the height of elements adjusting to the window.\n */\nfunction resizeHandler() {\n\n    // PDFViewer.\n    let height = $(window).innerHeight() - $('#viewer').offset().top;\n    $('#viewer iframe').css('height', `${height}px`);\n\n    // Dropdown for PDF.\n    let height1 = $(window).innerHeight() - ($('#dropdownPdf ul').offset().top || 120);\n    $('#dropdownPdf ul').css('max-height', `${height1 - 20}px`);\n\n    // Dropdown for Primary Annos.\n    let height2 = $(window).innerHeight() - ($('#dropdownAnnoPrimary ul').offset().top || 120);\n    $('#dropdownAnnoPrimary ul').css('max-height', `${height2 - 20}px`);\n\n    // Dropdown for Anno list.\n    let height3 = $(window).innerHeight() - ($('#dropdownAnnoList ul').offset().top || 120);\n    $('#dropdownAnnoList ul').css('max-height', `${height3 - 20}px`);\n\n    // Dropdown for Reference Annos.\n    let height4 = $(window).innerHeight() - ($('#dropdownAnnoReference ul').offset().top || 120);\n    $('#dropdownAnnoReference ul').css('max-height', `${height4 - 20}px`);\n\n}\n\n/**\n    Adjust the height of viewer according to window height.\n*/\nfunction adjustViewerSize() {\n    window.removeEventListener('resize', resizeHandler);\n    window.addEventListener('resize', resizeHandler);\n    resizeHandler();\n}\n\n/**\n    Disable annotation tool buttons.\n*/\nfunction disableAnnotateTools() {\n    window.iframeWindow.PDFAnnoCore.UI.disableRect();\n    window.iframeWindow.PDFAnnoCore.UI.disableSpan();\n    window.iframeWindow.PDFAnnoCore.UI.disableRelation();\n    window.iframeWindow.PDFAnnoCore.UI.disableViewMode();\n}\n\n/**\n    Set the behavior of the tool buttons for annotations.\n*/\nfunction initializeAnnoToolButtons() {\n\n    $('.js-tool-btn').off('click').on('click', (e) => {\n\n        let $button = $(e.currentTarget);\n        let type = $button.data('type');\n\n        $('.js-tool-btn').removeClass('active');\n        $button.addClass('active');\n\n        disableAnnotateTools();\n\n        if (type === 'view') {\n            window.iframeWindow.PDFAnnoCore.UI.enableViewMode();\n\n        } else if (type === 'span') {\n            window.iframeWindow.PDFAnnoCore.UI.enableSpan();\n\n        } else if (type === 'one-way') {\n            window.iframeWindow.PDFAnnoCore.UI.enableRelation('one-way');\n\n        } else if (type === 'two-way') {\n            window.iframeWindow.PDFAnnoCore.UI.enableRelation('two-way');\n\n        } else if (type === 'link') {\n            window.iframeWindow.PDFAnnoCore.UI.enableRelation('link');\n\n        } else if (type === 'rect') {\n            window.iframeWindow.PDFAnnoCore.UI.enableRect();\n\n        }\n\n        return false;\n    });\n\n    $('.js-tool-btn2').off('click').on('click', (e) => {\n\n        let $button = $(e.currentTarget);\n        let type = $button.data('type');\n\n        $button.blur();\n\n        if (type === 'download') {\n            downloadAnnotation();\n\n        } else if (type === 'delete') {\n            deleteAllAnnotations();\n        }\n\n        return false;\n    });\n\n    $('.js-tool-btn[data-type=\"view\"]').click();\n}\n\nfunction _getDownloadFileName() {\n\n    // The name of Primary Annotation.\n    let primaryAnnotationName;\n    $('#dropdownAnnoPrimary a').each((index, element) => {\n        let $elm = $(element);\n        if ($elm.find('.fa-check').hasClass('no-visible') === false) {\n            primaryAnnotationName = $elm.find('.js-annoname').text();\n        }\n    });\n    if (primaryAnnotationName) {\n        return primaryAnnotationName;\n    }\n\n    // The name of PDF.\n    let pdfFileName = iframeWindow.getFileName(iframeWindow.PDFView.url);\n    return pdfFileName.split('.')[0] + '.anno';\n}\n\n/**\n * Export the primary annotation data for download.\n */\nfunction downloadAnnotation() {\n\n    window.iframeWindow.PDFAnnoCore.getStoreAdapter().exportData().then(annotations => {\n        let blob = new Blob([annotations]);\n        let blobURL = window.URL.createObjectURL(blob);\n        let a = document.createElement('a');\n        document.body.appendChild(a); // for firefox working correctly.\n        a.download = _getDownloadFileName();\n        a.href = blobURL;\n        a.click();\n        a.parentNode.removeChild(a);\n    });\n\n    unlistenWindowLeaveEvent();\n}\n\n/**\n * Reload PDF Viewer.\n */\nfunction reloadPDFViewer() {\n\n    // Reload pdf.js.\n    $('#viewer iframe').remove();\n    $('#viewer').html('<iframe src=\"./pages/viewer.html\" class=\"anno-viewer\" frameborder=\"0\"></iframe>');\n\n    // Restart.\n    startApplication();\n}\n\n/**\n * Delete all annotations.\n */\nfunction deleteAllAnnotations() {\n\n    // Comfirm to user.\n    let userAnswer = window.confirm('Are you sure to clear the current annotations?');\n    if (!userAnswer) {\n        return;\n    }\n\n    iframeWindow.annotationContainer.destroy();\n\n    let documentId = window.iframeWindow.getFileName(window.iframeWindow.PDFView.url);\n    window.iframeWindow.PDFAnnoCore.getStoreAdapter().deleteAnnotations(documentId).then(() => {\n        reloadPDFViewer();\n    });\n}\n\n/**\n * Setup the color pickers.\n */\nfunction setupColorPicker() {\n\n    const colors = [\n        'rgb(255, 128, 0)', 'hsv 100 70 50', 'yellow', 'blanchedalmond',\n        'red', 'green', 'blue', 'violet'\n    ];\n\n    // Setup colorPickers.\n    $('.js-anno-palette').spectrum({\n        showPaletteOnly        : true,\n        showPalette            : true,\n        hideAfterPaletteSelect : true,\n        palette                : [\n            colors.slice(0, Math.floor(colors.length/2)),\n            colors.slice(Math.floor(colors.length/2), colors.length)\n        ]\n    });\n    // Set initial color.\n    $('.js-anno-palette').each((i, elm) => {\n        $(elm).spectrum('set', colors[ i % colors.length ]);\n    });\n\n    // Setup behavior.\n    $('.js-anno-palette').off('change').on('change', displayAnnotation.bind(null, false));\n}\n\n/**\n * Load annotation data and display.\n */\nfunction displayAnnotation(isPrimary) {\n\n    let annotations = [];\n    let colors = [];\n    let primaryIndex = -1;\n\n    // Primary annotation.\n    if (isPrimary) {\n        $('#dropdownAnnoPrimary a').each((index, element) => {\n            let $elm = $(element);\n            if ($elm.find('.fa-check').hasClass('no-visible') === false) {\n                let annoPath = $elm.find('.js-annoname').text();\n                if (!fileMap[annoPath]) {\n                    console.log('ERROR');\n                    return;\n                }\n                primaryIndex = 0;\n                annotations.push(fileMap[annoPath]);\n                let color = null; // Use the default color used for edit.\n                colors.push(color);\n\n                let filename = annoPath.split('/')[annoPath.split('/').length - 1];\n                localStorage.setItem('_pdfanno_primary_annoname', filename);\n                console.log('filename:', filename);\n            }\n        });\n    }\n\n    // Reference annotations.\n    if (!isPrimary) {\n        $('#dropdownAnnoReference a').each((index, element) => {\n            let $elm = $(element);\n            if ($elm.find('.fa-check').hasClass('no-visible') === false) {\n                let annoPath = $elm.find('.js-annoname').text();\n                if (!fileMap[annoPath]) {\n                    console.log('ERROR');\n                    return;\n                }\n                annotations.push(fileMap[annoPath]);\n                let color = $elm.find('.js-anno-palette').spectrum('get').toHexString();\n                console.log(color);\n                colors.push(color);\n            }\n        });\n    }\n\n    console.log('colors:', colors);\n\n    // Create import data.\n    let paperData = {\n        primary : primaryIndex,\n        colors,\n        annotations\n    };\n\n    // Pass the data to pdf-annotatejs.\n    window.iframeWindow.PDFAnnoCore.getStoreAdapter().importAnnotations(paperData, isPrimary).then(result => {\n\n        // Reload the viewer.\n        reloadPDFViewer();\n\n        // Reset tools to viewMode.\n        $('.js-tool-btn[data-type=\"view\"]').click();\n    });\n\n}\n\n/**\n * Set the confirm dialog at leaving the page.\n */\nfunction listenWindowLeaveEvent() {\n    $(window).off('beforeunload').on('beforeunload', () => {\n        return 'You don\\'t save the annotations yet.\\nAre you sure to leave ?';\n    });\n}\n\n/**\n * Unset the confirm dialog at leaving the page.\n */\nfunction unlistenWindowLeaveEvent() {\n    $(window).off('beforeunload');\n}\n\n/**\n * Clear the dropdowns of annotations.\n */\nfunction clearAnnotationDropdowns() {\n    $('#dropdownAnnoPrimary ul').html('');\n    $('#dropdownAnnoReference ul').html('');\n    $('#dropdownAnnoPrimary .js-text').text('Select Anno file');\n    $('#dropdownAnnoReference .js-text').text('Select reference Anno files');\n}\n\nfunction _excludeBaseDirName(filePath) {\n    let frgms = filePath.split('/');\n    return frgms[frgms.length - 1];\n}\n\n/**\n * Clear the dropdown of a PDF file.\n */\nfunction setupBrowseButton() {\n\n    // Enable to select the same directory twice.\n    $('.js-file :file').on('click', ev => {\n        $('input[type=\"file\"]').val(null);\n    });\n\n    $('.js-file :file').on('change', ev => {\n\n        console.log('Browse button starts to work.');\n\n        let files = ev.target.files;\n        if (!files || files.length === 0) {\n            console.log('ev.target.files', ev.target.files);\n            console.log('Not files specified');\n            return;\n        }\n\n        let pdfs = [];\n        let annos = [];\n\n        for (let i = 0; i < files.length; i++) {\n\n            let file = ev.target.files[i];\n            let relativePath = file.webkitRelativePath;\n            if (!relativePath) {\n                alert('Please select a directory, NOT a file');\n                return;\n            }\n\n            let frgms = relativePath.split('/');\n            if (frgms.length > 2) {\n                console.log('SKIP:', relativePath);\n                continue;\n            }\n            console.log('relativePath:', relativePath);\n\n            // Get files only PDFs or Anno files.\n            if (relativePath.match(/\\.pdf$/i)) {\n                pdfs.push(file);\n            } else if (relativePath.match(/\\.anno$/i)) {\n                annos.push(file);\n            }\n        }\n\n        // pdf.\n        $('#dropdownPdf .js-text').text('Select PDF file');\n        $('#dropdownPdf li').remove();\n        pdfs.forEach(file => {\n            let pdfPath = _excludeBaseDirName(file.webkitRelativePath);\n            let snipet = `\n                <li>\n                    <a href=\"#\">\n                        <i class=\"fa fa-check no-visible\" aria-hidden=\"true\"></i>&nbsp;\n                        <span class=\"js-pdfname\">${pdfPath}</span>\n                    </a>\n                </li>\n            `;\n            $('#dropdownPdf ul').append(snipet);\n        });\n\n        // Clear anno dropdowns.\n        clearAnnotationDropdowns();\n\n        // Initialize PDF Viewer.\n        clearAllAnnotations();\n        localStorage.removeItem('_pdfanno_pdf');\n        localStorage.removeItem('_pdfanno_pdfname');\n        reloadPDFViewer();\n\n        fileMap = {};\n\n        // Load pdfs.\n        pdfs.forEach(file => {\n            let fileReader = new FileReader();\n            fileReader.onload = event => {\n                let pdf = event.target.result;\n                let fileName = _excludeBaseDirName(file.webkitRelativePath);\n                fileMap[fileName] = pdf;\n            }\n            fileReader.readAsDataURL(file);\n        });\n\n        // Load annos.\n        annos.forEach(file => {\n            let fileReader = new FileReader();\n            fileReader.onload = event => {\n                let annotation = event.target.result;\n                let fileName = _excludeBaseDirName(file.webkitRelativePath);\n                fileMap[fileName] = annotation;\n            }\n            fileReader.readAsText(file);\n        });\n\n        // Setup anno / reference dropdown.\n        annos.forEach(file => {\n\n            let fileName = _excludeBaseDirName(file.webkitRelativePath);\n\n            let snipet1 = `\n                <li>\n                    <a href=\"#\">\n                        <i class=\"fa fa-check no-visible\" aria-hidden=\"true\"></i>\n                        <span class=\"js-annoname\">${fileName}</span>\n                    </a>\n                </li>\n            `;\n            $('#dropdownAnnoPrimary ul').append(snipet1);\n\n            let snipet2 = `\n                <li>\n                    <a href=\"#\">\n                        <i class=\"fa fa-check no-visible\" aria-hidden=\"true\"></i>\n                        <input type=\"text\"  name=\"color\" class=\"js-anno-palette\"  autocomplete=\"off\">\n                        <span class=\"js-annoname\">${fileName}</span>\n                    </a>\n                </li>\n            `;\n            $('#dropdownAnnoReference ul').append(snipet2);\n        });\n\n        // Setup color pallets.\n        setupColorPicker();\n\n        // Resize dropdown height.\n        resizeHandler();\n\n    });\n\n}\n\n/**\n * Setup the dropdown of PDFs.\n */\nfunction setupPdfDropdown() {\n\n    $('#dropdownPdf').on('click', 'a', e => {\n\n        let $this = $(e.currentTarget);\n        let pdfPath = $this.find('.js-pdfname').text();\n\n        let currentPDFName = $('#dropdownPdf .js-text').text();\n        if (currentPDFName === pdfPath) {\n            console.log('Not reload. the pdf are same.');\n            return;\n        }\n\n        // Confirm to override.\n        if (currentPDFName !== 'Select PDF file') {\n            if (!window.confirm('Are you sure to load another PDF ?')) {\n                return;\n            }\n        }\n\n        $('#dropdownPdf .js-text').text(pdfPath);\n\n        $('#dropdownPdf .fa-check').addClass('no-visible');\n        $this.find('.fa-check').removeClass('no-visible');\n\n        if (!fileMap[pdfPath]) {\n            return false;\n        }\n\n        // reload.\n        window.pdf = fileMap[pdfPath];\n        let fileName = pdfPath.split('/')[pdfPath.split('/').length - 1];\n        window.pdfName = fileName;\n\n        reloadPDFViewer();\n\n        // Close dropdown.\n        $('#dropdownPdf').click();\n\n        return false;\n    });\n}\n\n/**\n * Setup the dropdown of a primary annotation.\n */\nfunction setupPrimaryAnnoDropdown() {\n\n    $('#dropdownAnnoPrimary').on('click', 'a', e => {\n\n        let $this = $(e.currentTarget);\n        let annoName = $this.find('.js-annoname').text();\n\n        let currentAnnoName = $('#dropdownAnnoPrimary .js-text').text();\n        if (currentAnnoName === annoName) {\n            console.log('Not reload. the anno are same.');\n            return;\n        }\n\n        // Confirm to override.\n        if (currentAnnoName !== 'Select Anno file') {\n            if (!window.confirm('Are you sure to load another Primary Annotation ?')) {\n                return;\n            }\n        }\n\n        $('#dropdownAnnoPrimary .js-text').text(annoName);\n        console.log(annoName);\n\n        $('#dropdownAnnoPrimary .fa-check').addClass('no-visible');\n        $this.find('.fa-check').removeClass('no-visible');\n\n        if (!fileMap[annoName]) {\n            return false;\n        }\n\n        // reload.\n        displayAnnotation(true);\n\n        // Close\n        $('#dropdownAnnoPrimary').click();\n\n        return false;\n    });\n}\n\n/**\n * Setup the dropdown of reference annotations.\n */\nfunction setupReferenceAnnoDropdown() {\n\n    $('#dropdownAnnoReference').on('click', 'a', e => {\n\n        let $this = $(e.currentTarget);\n\n        $this.find('.fa-check').toggleClass('no-visible');\n\n        let annoNames = [];\n        $('#dropdownAnnoReference a').each((index, element) => {\n            let $elm = $(element);\n            if ($elm.find('.fa-check').hasClass('no-visible') === false) {\n                annoNames.push($elm.find('.js-annoname').text());\n            }\n        });\n        if (annoNames.length > 0) {\n            $('#dropdownAnnoReference .js-text').text(annoNames.join(','));\n        } else {\n            $('#dropdownAnnoReference .js-text').text('Select reference Anno files');\n        }\n\n        displayAnnotation(false);\n\n        return false;\n\n    });\n}\n\nfunction _getY(annotation) {\n\n    if (annotation.rectangles) {\n        return annotation.rectangles[0].y;\n\n    } else if (annotation.y1) {\n        return annotation.y1;\n\n    } else {\n        return annotation.y;\n    }\n}\n\n/**\n * Setup the dropdown for Anno list.\n */\nfunction setupAnnoListDropdown() {\n\n    // Show the list of primary annotations.\n    $('#dropdownAnnoList').on('click', () => {\n\n        // Get displayed annotations.\n        let annotations = iframeWindow.annotationContainer.getAllAnnotations();\n\n        // Filter only Primary.\n        annotations = annotations.filter(a => {\n            return !a.readOnly;\n        });\n\n        // Sort by offsetY.\n        annotations = annotations.sort((a1, a2) => {\n            return _getY(a1) - _getY(a2);\n        });\n\n        // Create elements.\n        let elements = annotations.map(a => {\n\n            let icon;\n            if (a.type === 'span') {\n                icon = '<i class=\"fa fa-pencil\"></i>';\n            } else if (a.type === 'relation' && a.direction === 'one-way') {\n                icon = '<i class=\"fa fa-long-arrow-right\"></i>';\n            } else if (a.type === 'relation' && a.direction === 'two-way') {\n                icon = '<i class=\"fa fa-arrows-h\"></i>';\n            } else if (a.type === 'relation' && a.direction === 'link') {\n                icon = '<i class=\"fa fa-minus\"></i>';\n            } else if (a.type === 'area') {\n                icon = '<i class=\"fa fa-square-o\"></i>';\n            }\n\n            let y = _getY(a);\n            let { pageNumber } = convertToExportY(y);\n\n\n            let snipet = `\n                <li>\n                    <a href=\"#\" data-page=\"${pageNumber}\" data-id=\"${a.uuid}\">\n                        ${icon}&nbsp;&nbsp;\n                        <span>${a.text || ''}</span>\n                    </a>\n                </li>\n            `;\n\n            return snipet;\n        });\n\n        $('#dropdownAnnoList ul').html(elements);\n\n    });\n\n    // Jump to the page that the selected annotation is at.\n    $('#dropdownAnnoList').on('click', 'a', e => {\n\n        // Jump to the page anno rendered at.\n        let page = $(e.currentTarget).data('page');\n        console.log('page:', page);\n        iframeWindow.PDFView.page = page;\n\n        // Highlight.\n        let id = $(e.currentTarget).data('id');\n        let annotation = iframeWindow.annotationContainer.findById(id);\n        if (annotation) {\n            annotation.highlight();\n            setTimeout(() => {\n                annotation.dehighlight();\n            }, 1000);\n        }\n\n        // Close the dropdown.\n        $('#dropdownAnnoList').click();\n    });\n\n\n\n}\n\n/**\n * Clear the all annotations from the view and storage.\n */\nfunction clearAllAnnotations() {\n    localStorage.removeItem('_pdfanno_containers');\n    localStorage.removeItem('_pdfanno_primary_annoname');\n}\n\n/**\n * Start PDFAnno Application.\n */\nfunction startApplication() {\n\n    // Alias for convenience.\n    window.iframeWindow = $('#viewer iframe').get(0).contentWindow;\n\n    iframeWindow.addEventListener('DOMContentLoaded', () => {\n\n        // Adjust the height of viewer.\n        adjustViewerSize();\n\n        // Initialize tool buttons' behavior.\n        initializeAnnoToolButtons();\n\n        // Reset the confirm dialog at leaving page.\n        unlistenWindowLeaveEvent();\n    });\n\n    // Set viewMode behavior after annotations rendered.\n    iframeWindow.addEventListener('annotationrendered', () => {\n        window.iframeWindow.PDFAnnoCore.UI.disableViewMode();\n        window.iframeWindow.PDFAnnoCore.UI.enableViewMode();\n    });\n\n    // Set the confirm dialog at page leaving.\n    iframeWindow.addEventListener('annotationUpdated', listenWindowLeaveEvent);\n}\n\n/**\n *  The entry point.\n */\nwindow.addEventListener('DOMContentLoaded', e => {\n\n    // Delete prev annotations.\n    if (location.search.indexOf('debug') === -1) {\n        clearAllAnnotations();\n    }\n\n    // Start application.\n    startApplication();\n\n    // Setup loading tools for PDFs and Anno files.\n    setupBrowseButton();\n    setupPdfDropdown();\n    setupPrimaryAnnoDropdown();\n    setupReferenceAnnoDropdown();\n    setupAnnoListDropdown();\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/pdfanno.js\n **/","/**\n * The padding of page top.\n */\nconst paddingTop = 9;\n\n/**\n * The padding between pages.\n */\nconst paddingBetweenPages = 9;\n\n/**\n * Convert the `y` position from the local coords to exported json.\n */\nexport function convertToExportY(y) {\n\n    let meta = getPageSize();\n\n    y -= paddingTop;\n\n    let pageHeight = meta.height + paddingBetweenPages;\n\n    let pageNumber = Math.floor(y / pageHeight) + 1;\n    let yInPage = y - (pageNumber-1) * pageHeight;\n\n    return { pageNumber, y : yInPage };\n}\n\n/**\n * Get a page size of a single PDF page.\n */\nfunction getPageSize() {\n\n    let pdfView = window.PDFView || iframeWindow.PDFView;\n\n    let viewBox = pdfView.pdfViewer.getPageView(0).viewport.viewBox;\n    let size = { width : viewBox[2], height : viewBox[3] };\n    return size;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/src/utils/position.js\n **/","module.exports = __webpack_public_path__ + \"dist/index.html\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/file-loader?name=dist/index.html!./src/index.html\n ** module id = 2\n ** module chunks = 0\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../node_modules/css-loader/index.js!./pdfanno.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../node_modules/css-loader/index.js!./pdfanno.css\", function() {\n\t\t\tvar newContent = require(\"!!./../node_modules/css-loader/index.js!./pdfanno.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/style-loader!./~/css-loader!./src/pdfanno.css\n ** module id = 3\n ** module chunks = 0\n **/","exports = module.exports = require(\"./../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"@charset 'utf-8';\\n\\n.no-visible {\\n    visibility: hidden;\\n}\\n\\n/**\\n * Viewer size.\\n * This height will be override to fit the browser height (by app.js).\\n */\\n.anno-viewer {\\n    width: 100%;\\n    height: 500px;\\n}\\n\\n/**\\n * Annotation Select UI Layout.\\n */\\n.anno-select-layout {}\\n.anno-select-layout .row:first-child {\\n    margin-bottom: 10px;\\n}\\n.anno-select-layout [type=\\\"radio\\\"] {\\n    margin-right: 5px;\\n}\\n.anno-select-layout [type=\\\"file\\\"] {\\n    display: inline-block;\\n    margin-left: 5px;\\n    line-height: 1em;\\n}\\n.anno-select-layout .sp-replacer {\\n    padding: 0;\\n    border: none;\\n}\\n.anno-select-layout .sp-dd {\\n    display: none;\\n}\\n\\n/**\\n * Dropdown.\\n */\\n.dropdown-menu {\\n    overflow: scroll;\\n}\\n\\n/**\\n * Color picker.\\n */\\n.anno-ui .sp-replacer {\\n    padding: 0;\\n    border: none;\\n}\\n.anno-ui .sp-dd {\\n    display: none;\\n}\\n.anno-ui .sp-preview {\\n    margin-right: 0;\\n}\\n\\n\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./src/pdfanno.css\n ** module id = 4\n ** module chunks = 0\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\nmodule.exports = function() {\r\n\tvar list = [];\r\n\r\n\t// return the list of modules as css string\r\n\tlist.toString = function toString() {\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar item = this[i];\r\n\t\t\tif(item[2]) {\r\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.join(\"\");\r\n\t};\r\n\r\n\t// import a list of modules into the list\r\n\tlist.i = function(modules, mediaQuery) {\r\n\t\tif(typeof modules === \"string\")\r\n\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\tvar alreadyImportedModules = {};\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar id = this[i][0];\r\n\t\t\tif(typeof id === \"number\")\r\n\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t}\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar item = modules[i];\r\n\t\t\t// skip already imported module\r\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn list;\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader/lib/css-base.js\n ** module id = 5\n ** module chunks = 0 1\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar stylesInDom = {},\r\n\tmemoize = function(fn) {\r\n\t\tvar memo;\r\n\t\treturn function () {\r\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\treturn memo;\r\n\t\t};\r\n\t},\r\n\tisOldIE = memoize(function() {\r\n\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t}),\r\n\tgetHeadElement = memoize(function () {\r\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t}),\r\n\tsingletonElement = null,\r\n\tsingletonCounter = 0,\r\n\tstyleElementsInsertedAtTop = [];\r\n\r\nmodule.exports = function(list, options) {\r\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\r\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t}\r\n\r\n\toptions = options || {};\r\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t// tags it will allow on a page\r\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\r\n\t// By default, add <style> tags to the bottom of <head>.\r\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\r\n\r\n\tvar styles = listToStyles(list);\r\n\taddStylesToDom(styles, options);\r\n\r\n\treturn function update(newList) {\r\n\t\tvar mayRemove = [];\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tdomStyle.refs--;\r\n\t\t\tmayRemove.push(domStyle);\r\n\t\t}\r\n\t\tif(newList) {\r\n\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\taddStylesToDom(newStyles, options);\r\n\t\t}\r\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction addStylesToDom(styles, options) {\r\n\tfor(var i = 0; i < styles.length; i++) {\r\n\t\tvar item = styles[i];\r\n\t\tvar domStyle = stylesInDom[item.id];\r\n\t\tif(domStyle) {\r\n\t\t\tdomStyle.refs++;\r\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t}\r\n\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar parts = [];\r\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction listToStyles(list) {\r\n\tvar styles = [];\r\n\tvar newStyles = {};\r\n\tfor(var i = 0; i < list.length; i++) {\r\n\t\tvar item = list[i];\r\n\t\tvar id = item[0];\r\n\t\tvar css = item[1];\r\n\t\tvar media = item[2];\r\n\t\tvar sourceMap = item[3];\r\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\tif(!newStyles[id])\r\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\telse\r\n\t\t\tnewStyles[id].parts.push(part);\r\n\t}\r\n\treturn styles;\r\n}\r\n\r\nfunction insertStyleElement(options, styleElement) {\r\n\tvar head = getHeadElement();\r\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\r\n\tif (options.insertAt === \"top\") {\r\n\t\tif(!lastStyleElementInsertedAtTop) {\r\n\t\t\thead.insertBefore(styleElement, head.firstChild);\r\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\r\n\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\r\n\t\t} else {\r\n\t\t\thead.appendChild(styleElement);\r\n\t\t}\r\n\t\tstyleElementsInsertedAtTop.push(styleElement);\r\n\t} else if (options.insertAt === \"bottom\") {\r\n\t\thead.appendChild(styleElement);\r\n\t} else {\r\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\r\n\t}\r\n}\r\n\r\nfunction removeStyleElement(styleElement) {\r\n\tstyleElement.parentNode.removeChild(styleElement);\r\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\r\n\tif(idx >= 0) {\r\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\r\n\t}\r\n}\r\n\r\nfunction createStyleElement(options) {\r\n\tvar styleElement = document.createElement(\"style\");\r\n\tstyleElement.type = \"text/css\";\r\n\tinsertStyleElement(options, styleElement);\r\n\treturn styleElement;\r\n}\r\n\r\nfunction createLinkElement(options) {\r\n\tvar linkElement = document.createElement(\"link\");\r\n\tlinkElement.rel = \"stylesheet\";\r\n\tinsertStyleElement(options, linkElement);\r\n\treturn linkElement;\r\n}\r\n\r\nfunction addStyle(obj, options) {\r\n\tvar styleElement, update, remove;\r\n\r\n\tif (options.singleton) {\r\n\t\tvar styleIndex = singletonCounter++;\r\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\r\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t} else if(obj.sourceMap &&\r\n\t\ttypeof URL === \"function\" &&\r\n\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\ttypeof Blob === \"function\" &&\r\n\t\ttypeof btoa === \"function\") {\r\n\t\tstyleElement = createLinkElement(options);\r\n\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t\tif(styleElement.href)\r\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t};\r\n\t} else {\r\n\t\tstyleElement = createStyleElement(options);\r\n\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t};\r\n\t}\r\n\r\n\tupdate(obj);\r\n\r\n\treturn function updateStyle(newObj) {\r\n\t\tif(newObj) {\r\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\treturn;\r\n\t\t\tupdate(obj = newObj);\r\n\t\t} else {\r\n\t\t\tremove();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nvar replaceText = (function () {\r\n\tvar textStore = [];\r\n\r\n\treturn function (index, replacement) {\r\n\t\ttextStore[index] = replacement;\r\n\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t};\r\n})();\r\n\r\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\tvar css = remove ? \"\" : obj.css;\r\n\r\n\tif (styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t} else {\r\n\t\tvar cssNode = document.createTextNode(css);\r\n\t\tvar childNodes = styleElement.childNodes;\r\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\tif (childNodes.length) {\r\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t} else {\r\n\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction applyToTag(styleElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\r\n\tif(media) {\r\n\t\tstyleElement.setAttribute(\"media\", media)\r\n\t}\r\n\r\n\tif(styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = css;\r\n\t} else {\r\n\t\twhile(styleElement.firstChild) {\r\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t}\r\n\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t}\r\n}\r\n\r\nfunction updateLink(linkElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(sourceMap) {\r\n\t\t// http://stackoverflow.com/a/26603875\r\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t}\r\n\r\n\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\r\n\tvar oldSrc = linkElement.href;\r\n\r\n\tlinkElement.href = URL.createObjectURL(blob);\r\n\r\n\tif(oldSrc)\r\n\t\tURL.revokeObjectURL(oldSrc);\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/style-loader/addStyles.js\n ** module id = 6\n ** module chunks = 0 1\n **/"],"sourceRoot":""}