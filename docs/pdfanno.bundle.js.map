{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 4146fd03826d3662c8fb","webpack:///./src/pdfanno.js","webpack:///./src/page/ui/browseButton.js","webpack:///./src/page/util/display.js","webpack:///./src/page/ui/pdfDropdown.js","webpack:///./src/page/ui/primaryAnnoDropdown.js","webpack:///./src/page/ui/annoListDropdown.js","webpack:///./src/core/src/utils/position.js","webpack:///./src/page/ui/referenceAnnoDropdown.js","webpack:///./src/page/ui/annotationTools.js","webpack:///./src/page/util/window.js","webpack:///./src/index.html","webpack:///./src/pdfanno.css?319e","webpack:///./src/pdfanno.css","webpack:///./~/css-loader/lib/css-base.js","webpack:///./~/style-loader/addStyles.js"],"names":["browseButton","pdfDropdown","primaryAnnoDropdown","annoListDropdown","referenceAnnoDropdown","annotationsTools","require","window","fileMap","adjustViewerSize","removeEventListener","addEventListener","startApplication","iframeWindow","$","get","contentWindow","event","document","createEvent","initCustomEvent","dispatchEvent","location","search","indexOf","setup","on","val","files","ev","target","error","isValidDirectorySelect","alert","current","getCurrentFileNames","getContents","pdfs","annos","setPDFDropdownList","setAnnoDropdownList","loadData","then","display","currentDisplay","newFileMap","console","log","Object","keys","name","pdfName","pdf","text","each","index","element","$elm","find","removeClass","primaryAnnotationName","promise1","Promise","resolve","names","referenceAnnotationNames","colors","referenceAnnotationColors","changed","filter","i","found","spectrum","promise2","length","join","all","afterLoaded","annotationToolMode","click","_excludeBaseDirName","filePath","frgms","split","hasClass","annoName","push","color","toHexString","relativePath","webkitRelativePath","file","match","remove","forEach","pdfPath","snipet","append","html","fileName","snipet1","snipet2","reject","promises","p","map","fileReader","FileReader","onload","result","readAsDataURL","concat","annotation","readAsText","displayAnnotation","reloadPDFViewer","clearAllAnnotations","setupColorPicker","isPrimary","reload","annotations","primaryIndex","annoPath","filename","localStorage","setItem","paperData","primary","PDFAnnoCore","getStoreAdapter","importAnnotations","removeItem","showPaletteOnly","showPalette","hideAfterPaletteSelect","palette","slice","Math","floor","elm","off","bind","$this","e","currentTarget","currentPDFName","confirm","addClass","currentAnnoName","annotationContainer","getAllAnnotations","a","readOnly","sort","a1","a2","_getY","elements","icon","type","direction","y","pageNumber","uuid","page","data","PDFView","id","findById","highlight","setTimeout","dehighlight","rectangles","y1","convertToExportY","paddingTop","paddingBetweenPages","meta","getPageSize","pageHeight","height","yInPage","pdfView","viewBox","pdfViewer","getPageView","viewport","size","width","toggleClass","annoNames","disableAnnotateTools","$button","blur","UI","enableSpan","enableRelation","enableRect","downloadAnnotation","deleteAllAnnotations","disableRect","disableSpan","disableRelation","disableViewMode","userAnswer","destroy","documentId","getFileName","url","deleteAnnotations","exportData","blob","Blob","blobURL","URL","createObjectURL","createElement","body","appendChild","download","_getDownloadFileName","href","parentNode","removeChild","pdfFileName","listenWindowLeaveEvent","unlistenWindowLeaveEvent","resizeHandler","innerHeight","offset","top","css","height1","height2","height3","height4"],"mappings":"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B,GAAG,oCAAoC,iBAAiB,mBAAmB,GAAG,8BAA8B,oBAAoB,GAAG,4CAA4C,uBAAuB,GAAG,uDAAuD,iBAAiB,mBAAmB,GAAG,mBAAmB,oBAAoB,GAAG,wBAAwB,sBAAsB,GAAG;;AAEt7B;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAgB,iBAAiB;AACjC;AACA;AACA,yCAAwC,gBAAgB;AACxD,KAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA,aAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACjDA;AACA;AACA;AACA;AACA,qBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAgB,mBAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,sBAAsB;AACtC;AACA;AACA,mBAAkB,2BAA2B;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA,kBAAiB,2BAA2B;AAC5C;AACA;AACA,SAAQ,uBAAuB;AAC/B;AACA;AACA,IAAG;AACH;AACA,kBAAiB,uBAAuB;AACxC;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA,iCAAgC,sBAAsB;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA,GAAE;AACF;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,wDAAuD;AACvD;;AAEA,8BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;AACA","file":"./dist/pdfanno.bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"PDFAnnoCore\"] = factory();\n\telse\n\t\troot[\"PDFAnnoCore\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 4146fd03826d3662c8fb\n **/","require(\"file?name=dist/index.html!./index.html\");\nrequire(\"!style!css!./pdfanno.css\");\n\nimport * as browseButton from './page/ui/browseButton';\nimport * as pdfDropdown from './page/ui/pdfDropdown';\nimport * as primaryAnnoDropdown from './page/ui/primaryAnnoDropdown';\nimport * as annoListDropdown from './page/ui/annoListDropdown';\nimport * as referenceAnnoDropdown from './page/ui/referenceAnnoDropdown';\nimport * as annotationsTools from './page/ui/annotationTools';\n\nimport {\n    displayAnnotation,\n    reloadPDFViewer,\n    clearAllAnnotations,\n    setupColorPicker\n} from './page/util/display';\n\nimport {\n    listenWindowLeaveEvent,\n    unlistenWindowLeaveEvent,\n    resizeHandler\n} from './page/util/window';\n\n/**\n * The data which is loaded via `Browse` button.\n */\nwindow.fileMap = {};\n\n/**\n    Adjust the height of viewer according to window height.\n*/\nfunction adjustViewerSize() {\n    window.removeEventListener('resize', resizeHandler);\n    window.addEventListener('resize', resizeHandler);\n    resizeHandler();\n}\n\n/**\n * Start PDFAnno Application.\n */\nfunction startApplication() {\n\n    // Alias for convenience.\n    window.iframeWindow = $('#viewer iframe').get(0).contentWindow;\n\n    iframeWindow.addEventListener('DOMContentLoaded', () => {\n\n        // Adjust the height of viewer.\n        adjustViewerSize();\n\n        // Reset the confirm dialog at leaving page.\n        unlistenWindowLeaveEvent();\n\n        var event = document.createEvent('CustomEvent');\n        event.initCustomEvent('appInitCompleted', true, true, null);\n        window.dispatchEvent(event);\n    });\n\n    // Set the confirm dialog when leaving a page.\n    iframeWindow.addEventListener('annotationUpdated', listenWindowLeaveEvent);\n}\n\n/**\n *  The entry point.\n */\nwindow.addEventListener('DOMContentLoaded', e => {\n\n    // Delete prev annotations.\n    if (location.search.indexOf('debug') === -1) {\n        clearAllAnnotations();\n    }\n\n    // Start application.\n    startApplication();\n\n    // Setup UI parts.\n    browseButton.setup();\n    pdfDropdown.setup();\n    primaryAnnoDropdown.setup();\n    referenceAnnoDropdown.setup();\n    annoListDropdown.setup();\n    annotationsTools.setup();\n\n    window.addEventListener('restartApp', startApplication);\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/pdfanno.js\n **/","/**\n * UI parts - Browse button.\n */\nimport { reloadPDFViewer, clearAllAnnotations, setupColorPicker, displayAnnotation } from '../util/display';\n\n/**\n * Setup the behavior of a Browse Button.\n */\nexport function setup() {\n\n    // Enable to select the same directory twice.\n    $('.js-file :file').on('click', ev => {\n        $('input[type=\"file\"]').val(null);\n    });\n\n    $('.js-file :file').on('change', ev => {\n\n        const files = ev.target.files;\n\n        let error = isValidDirectorySelect(files);\n        if (error) {\n            return alert(error);\n        }\n\n        // Get current visuals.\n        const current = getCurrentFileNames();\n\n        // Get contents.\n        const { pdfs, annos } = getContents(files);\n\n        // Setup PDF Dropdown.\n        setPDFDropdownList(pdfs);\n\n        // Setup Anno Dropdown.\n        setAnnoDropdownList(annos);\n\n        // Initialize PDF Viewer.\n        clearAllAnnotations();\n\n        // Load data.\n        loadData(pdfs, annos).then(() => {\n\n            // Display a PDF and annotations.\n            display(current, fileMap);\n\n        });\n\n    });\n\n}\n\nfunction display(currentDisplay, newFileMap) {\n\n    console.log('files:', Object.keys(newFileMap));\n\n    let name;\n\n    // PDF.\n    name = currentDisplay.pdfName;\n    if (name && newFileMap[name]) {\n        window.pdf = fileMap[name];\n        window.pdfName = currentDisplay.pdfName;\n\n        $('#dropdownPdf .js-text').text(name);\n        $('#dropdownPdf a').each((index, element) => {\n            let $elm = $(element);\n            if ($elm.find('.js-pdfname').text() === name) {\n                $elm.find('.fa-check').removeClass('no-visible');\n            }\n        });\n\n    } else {\n        delete window.pdf;\n        delete window.pdfName;\n    }\n\n    // Primary Annotation.\n    name = currentDisplay.primaryAnnotationName;\n    let promise1 = Promise.resolve();\n    if (name && newFileMap[name]) {\n\n        $('#dropdownAnnoPrimary .js-text').text(name);\n        $('#dropdownAnnoPrimary a').each((index, element) => {\n            let $elm = $(element);\n            if ($elm.find('.js-annoname').text() === name) {\n                $elm.find('.fa-check').removeClass('no-visible');\n            }\n        });\n\n        promise1 = displayAnnotation(true, false);\n    }\n\n    // Reference Annotations.\n    let names = currentDisplay.referenceAnnotationNames;\n    let colors = currentDisplay.referenceAnnotationColors;\n    let changed = false;\n    names = names.filter((name, i) => {\n        let found = false;\n        if (newFileMap[name]) {\n            $('#dropdownAnnoReference a').each((index, element) => {\n                let $elm = $(element);\n                if ($elm.find('.js-annoname').text() === name) {\n                    $elm.find('.fa-check').removeClass('no-visible');\n                    $elm.find('.js-anno-palette').spectrum('set', colors[i]);\n\n                    console.log('color: ', colors[i]);\n\n                    found = true;\n                }\n            });\n        }\n        return found;\n    });\n    let promise2 = Promise.resolve();\n    if (names.length > 0) {\n        $('#dropdownAnnoReference .js-text').text(names.join(','));\n        promise2 = displayAnnotation(false, false);\n    }\n\n    // Reload page.\n    Promise.all([promise1, promise2]).then(() => {\n        reloadPDFViewer();\n\n        // Restore the state of annotationTools.\n        const afterLoaded = () => {\n            window.removeEventListener('appInitCompleted', afterLoaded);\n            if (window.annotationToolMode !== 'view') {\n                $(`.js-tool-btn[data-type=\"${window.annotationToolMode}\"]`).removeClass('active').click();\n            }\n        };\n        window.addEventListener('appInitCompleted', afterLoaded);\n    });\n\n}\n\n/**\n * Get a filename from a path.\n */\nfunction _excludeBaseDirName(filePath) {\n    let frgms = filePath.split('/');\n    return frgms[frgms.length - 1];\n}\n\n/**\n * Get the file names which currently are displayed.\n */\nfunction getCurrentFileNames() {\n\n    let text;\n\n    // a PDF name.\n    text = $('#dropdownPdf .js-text').text();\n    let pdfName = (text !== 'Select PDF file' ? text : null);\n\n    // a Primary anno.\n    text = $('#dropdownAnnoPrimary .js-text').text();\n    let primaryAnnotationName = (text !== 'Select Anno file' ? text : null);\n\n\n    let referenceAnnotationNames = [];\n    let referenceAnnotationColors = [];\n    $('#dropdownAnnoReference a').each((index, element) => {\n        let $elm = $(element);\n        if ($elm.find('.fa-check').hasClass('no-visible') === false) {\n            let annoName = $elm.find('.js-annoname').text(); // TODO こういうのはJS変数として持っておいたほうがいいかも（選択済のものについて）\n            referenceAnnotationNames.push(annoName);\n            let color = $elm.find('.js-anno-palette').spectrum('get').toHexString();\n            referenceAnnotationColors.push(color);\n        }\n    });\n\n    return {\n        pdfName,\n        primaryAnnotationName,\n        referenceAnnotationNames,\n        referenceAnnotationColors\n    };\n}\n\n/**\n * Check whether the directory the user specified is valid.\n */\nfunction isValidDirectorySelect(files) {\n\n    // Error, if no contents exits.\n    if (!files || files.length === 0) {\n        return 'Not files specified';\n    }\n\n    // Error, if the user select a file - not a directory.\n    let relativePath = files[0].webkitRelativePath;\n    if (!relativePath) {\n        return 'Please select a directory, NOT a file';\n    }\n\n    // OK.\n    return null;\n}\n\n/**\n * Extract PDFs and annotations from files the user specified.\n */\nfunction getContents(files) {\n    let pdfs = [];\n    let annos = [];\n\n    for (let i = 0; i < files.length; i++) {\n\n        let file = files[i];\n        let relativePath = file.webkitRelativePath;\n\n        let frgms = relativePath.split('/');\n        if (frgms.length > 2) {\n            console.log('SKIP:', relativePath);\n            continue;\n        }\n        console.log('relativePath:', relativePath);\n\n        // Get files only PDFs or Anno files.\n        if (relativePath.match(/\\.pdf$/i)) {\n            pdfs.push(file);\n        } else if (relativePath.match(/\\.anno$/i)) {\n            annos.push(file);\n        }\n    }\n\n    return {\n        pdfs,\n        annos\n    };\n}\n\n/**\n * Setup the contents of the dropdown for PDFs.\n */\nfunction setPDFDropdownList(pdfs) {\n\n    $('#dropdownPdf .js-text').text('Select PDF file');\n    $('#dropdownPdf li').remove();\n    pdfs.forEach(file => {\n        let pdfPath = _excludeBaseDirName(file.webkitRelativePath);\n        let snipet = `\n            <li>\n                <a href=\"#\">\n                    <i class=\"fa fa-check no-visible\" aria-hidden=\"true\"></i>&nbsp;\n                    <span class=\"js-pdfname\">${pdfPath}</span>\n                </a>\n            </li>\n        `;\n        $('#dropdownPdf ul').append(snipet);\n    });\n}\n\n/**\n * Setup the contents of the dropdowns for primary/reference annotations.\n */\nfunction setAnnoDropdownList(annos) {\n\n    // Reset.\n    $('#dropdownAnnoPrimary ul').html('');\n    $('#dropdownAnnoReference ul').html('');\n    $('#dropdownAnnoPrimary .js-text').text('Select Anno file');\n    $('#dropdownAnnoReference .js-text').text('Select reference files');\n\n    // Setup anno / reference dropdown.\n    annos.forEach(file => {\n\n        let fileName = _excludeBaseDirName(file.webkitRelativePath);\n\n        let snipet1 = `\n            <li>\n                <a href=\"#\">\n                    <i class=\"fa fa-check no-visible\" aria-hidden=\"true\"></i>\n                    <span class=\"js-annoname\">${fileName}</span>\n                </a>\n            </li>\n        `;\n        $('#dropdownAnnoPrimary ul').append(snipet1);\n\n        let snipet2 = `\n            <li>\n                <a href=\"#\">\n                    <i class=\"fa fa-check no-visible\" aria-hidden=\"true\"></i>\n                    <input type=\"text\" name=\"color\" class=\"js-anno-palette\" autocomplete=\"off\">\n                    <span class=\"js-annoname\">${fileName}</span>\n                </a>\n            </li>\n        `;\n        $('#dropdownAnnoReference ul').append(snipet2);\n    });\n\n    // Setup color pallets.\n    setupColorPicker();\n}\n\n/**\n * Load PDFs and Annotations from the directory the user specified.\n */\nfunction loadData(pdfs, annos) {\n\n    window.fileMap = {};\n\n    return new Promise((resolve, reject) => {\n\n        let promises = [];\n\n        // Load pdfs.\n        let p = pdfs.map(file => {\n            return new Promise((resolve, reject) => {\n                let fileReader = new FileReader();\n                fileReader.onload = event => {\n                    let pdf = event.target.result;\n                    let fileName = _excludeBaseDirName(file.webkitRelativePath);\n                    fileMap[fileName] = pdf;\n                    resolve();\n                }\n                fileReader.readAsDataURL(file);\n            });\n        });\n        promises = promises.concat(p);\n\n        // Load annos.\n        p = annos.map(file => {\n            return new Promise((resolve, reject) => {\n                let fileReader = new FileReader();\n                fileReader.onload = event => {\n                    let annotation = event.target.result;\n                    let fileName = _excludeBaseDirName(file.webkitRelativePath);\n                    fileMap[fileName] = annotation;\n                    resolve();\n                }\n                fileReader.readAsText(file);\n            });\n        });\n        promises = promises.concat(p);\n\n        // Wait for complete.\n        Promise.all(promises).then(resolve);\n\n    });\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/ui/browseButton.js\n **/","\n\n\n\n\nexport function displayAnnotation(isPrimary, reload=true) {\n\n    let annotations = [];\n    let colors = [];\n    let primaryIndex = -1;\n\n    // Primary annotation.\n    if (isPrimary) {\n        $('#dropdownAnnoPrimary a').each((index, element) => {\n            let $elm = $(element);\n            if ($elm.find('.fa-check').hasClass('no-visible') === false) {\n                let annoPath = $elm.find('.js-annoname').text();\n                if (!fileMap[annoPath]) {\n                    console.log('ERROR');\n                    return;\n                }\n                primaryIndex = 0;\n                annotations.push(fileMap[annoPath]);\n                let color = null; // Use the default color used for edit.\n                colors.push(color);\n\n                let filename = annoPath.split('/')[annoPath.split('/').length - 1];\n                localStorage.setItem('_pdfanno_primary_annoname', filename);\n                console.log('filename:', filename);\n            }\n        });\n    }\n\n    // Reference annotations.\n    if (!isPrimary) {\n        $('#dropdownAnnoReference a').each((index, element) => {\n            let $elm = $(element);\n            if ($elm.find('.fa-check').hasClass('no-visible') === false) {\n                let annoPath = $elm.find('.js-annoname').text();\n                if (!fileMap[annoPath]) {\n                    console.log('ERROR');\n                    return;\n                }\n                annotations.push(fileMap[annoPath]);\n                let color = $elm.find('.js-anno-palette').spectrum('get').toHexString();\n                console.log(color);\n                colors.push(color);\n            }\n        });\n    }\n\n    console.log('colors:', colors);\n\n    // Create import data.\n    let paperData = {\n        primary : primaryIndex,\n        colors,\n        annotations\n    };\n\n    // Pass the data to pdf-annotatejs.\n    window.iframeWindow.PDFAnnoCore.getStoreAdapter().importAnnotations(paperData, isPrimary).then(result => {\n\n        if (reload) {\n            // Reload the viewer.\n            reloadPDFViewer();\n        }\n\n        // Reset tools to viewMode.\n        // $('.js-tool-btn[data-type=\"view\"]').click();\n\n        return true;\n    });\n\n}\n\n\n/*\nvar event = document.createEvent('CustomEvent');\nevent.initCustomEvent('annotationrendered', true, true, null);\nwindow.dispatchEvent(event);\n*/\n\n\n\n/**\n * Reload PDF Viewer.\n */\nexport function reloadPDFViewer() {\n\n    // Reload pdf.js.\n    $('#viewer iframe').remove();\n    $('#viewer').html('<iframe src=\"./pages/viewer.html\" class=\"anno-viewer\" frameborder=\"0\"></iframe>');\n\n    // Restart.\n    var event = document.createEvent('CustomEvent');\n    event.initCustomEvent('restartApp', true, true, null);\n    window.dispatchEvent(event);\n}\n\n\n/**\n * Clear the all annotations from the view and storage.\n */\nexport function clearAllAnnotations() {\n    localStorage.removeItem('_pdfanno_containers');\n    localStorage.removeItem('_pdfanno_primary_annoname');\n}\n\n/**\n * Setup the color pickers.\n */\nexport function setupColorPicker() {\n\n    const colors = [\n        'rgb(255, 128, 0)', 'hsv 100 70 50', 'yellow', 'blanchedalmond',\n        'red', 'green', 'blue', 'violet'\n    ];\n\n    // Setup colorPickers.\n    $('.js-anno-palette').spectrum({\n        showPaletteOnly        : true,\n        showPalette            : true,\n        hideAfterPaletteSelect : true,\n        palette                : [\n            colors.slice(0, Math.floor(colors.length/2)),\n            colors.slice(Math.floor(colors.length/2), colors.length)\n        ]\n    });\n    // Set initial color.\n    $('.js-anno-palette').each((i, elm) => {\n        $(elm).spectrum('set', colors[ i % colors.length ]);\n    });\n\n    // Setup behavior.\n    $('.js-anno-palette').off('change').on('change', displayAnnotation.bind(null, false));\n}\n\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/util/display.js\n **/","/**\n * UI parts - PDF Dropdown.\n */\nimport { reloadPDFViewer } from '../util/display';\n\n\n/**\n * Setup the dropdown of PDFs.\n */\nexport function setup() {\n\n    $('#dropdownPdf').on('click', 'a', e => {\n\n        let $this = $(e.currentTarget);\n        let pdfPath = $this.find('.js-pdfname').text();\n\n        let currentPDFName = $('#dropdownPdf .js-text').text();\n        if (currentPDFName === pdfPath) {\n            console.log('Not reload. the pdf are same.');\n            return;\n        }\n\n        // Confirm to override.\n        if (currentPDFName !== 'Select PDF file') {\n            if (!window.confirm('Are you sure to load another PDF ?')) {\n                return;\n            }\n        }\n\n        $('#dropdownPdf .js-text').text(pdfPath);\n\n        $('#dropdownPdf .fa-check').addClass('no-visible');\n        $this.find('.fa-check').removeClass('no-visible');\n\n        if (!fileMap[pdfPath]) {\n            return false;\n        }\n\n        // reload.\n        window.pdf = fileMap[pdfPath];\n        let fileName = pdfPath.split('/')[pdfPath.split('/').length - 1];\n        window.pdfName = fileName;\n\n        reloadPDFViewer();\n\n        // Close dropdown.\n        $('#dropdownPdf').click();\n\n        return false;\n    });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/ui/pdfDropdown.js\n **/","/**\n * UI parts - Primary Annotation Dropdown.\n */\nimport { displayAnnotation } from '../util/display';\n\n/**\n * Setup a click action of the Primary Annotation Dropdown.\n */\nexport function setup() {\n\n    $('#dropdownAnnoPrimary').on('click', 'a', e => {\n\n        let $this = $(e.currentTarget);\n        let annoName = $this.find('.js-annoname').text();\n\n        let currentAnnoName = $('#dropdownAnnoPrimary .js-text').text();\n        if (currentAnnoName === annoName) {\n            console.log('Not reload. the anno are same.');\n            return;\n        }\n\n        // Confirm to override.\n        if (currentAnnoName !== 'Select Anno file') {\n            if (!window.confirm('Are you sure to load another Primary Annotation ?')) {\n                return;\n            }\n        }\n\n        $('#dropdownAnnoPrimary .js-text').text(annoName);\n        console.log(annoName);\n\n        $('#dropdownAnnoPrimary .fa-check').addClass('no-visible');\n        $this.find('.fa-check').removeClass('no-visible');\n\n        // if (!fileMap[annoName]) {\n        //     return false;\n        // }\n\n        // reload.\n        displayAnnotation(true);\n\n        // Close\n        $('#dropdownAnnoPrimary').click();\n\n        return false;\n    });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/ui/primaryAnnoDropdown.js\n **/","/**\n * UI parts - Anno List Dropdown.\n */\nimport { convertToExportY } from '../../core/src/utils/position';\n\n/**\n * Setup the dropdown for Anno list.\n */\nexport function setup() {\n\n    // Show the list of primary annotations.\n    $('#dropdownAnnoList').on('click', () => {\n\n        // Get displayed annotations.\n        let annotations = iframeWindow.annotationContainer.getAllAnnotations();\n\n        // Filter only Primary.\n        annotations = annotations.filter(a => {\n            return !a.readOnly;\n        });\n\n        // Sort by offsetY.\n        annotations = annotations.sort((a1, a2) => {\n            return _getY(a1) - _getY(a2);\n        });\n\n        // Create elements.\n        let elements = annotations.map(a => {\n\n            let icon;\n            if (a.type === 'span') {\n                icon = '<i class=\"fa fa-pencil\"></i>';\n            } else if (a.type === 'relation' && a.direction === 'one-way') {\n                icon = '<i class=\"fa fa-long-arrow-right\"></i>';\n            } else if (a.type === 'relation' && a.direction === 'two-way') {\n                icon = '<i class=\"fa fa-arrows-h\"></i>';\n            } else if (a.type === 'relation' && a.direction === 'link') {\n                icon = '<i class=\"fa fa-minus\"></i>';\n            } else if (a.type === 'area') {\n                icon = '<i class=\"fa fa-square-o\"></i>';\n            }\n\n            let y = _getY(a);\n            let { pageNumber } = convertToExportY(y);\n\n\n            let snipet = `\n                <li>\n                    <a href=\"#\" data-page=\"${pageNumber}\" data-id=\"${a.uuid}\">\n                        ${icon}&nbsp;&nbsp;\n                        <span>${a.text || ''}</span>\n                    </a>\n                </li>\n            `;\n\n            return snipet;\n        });\n\n        $('#dropdownAnnoList ul').html(elements);\n\n    });\n\n    // Jump to the page that the selected annotation is at.\n    $('#dropdownAnnoList').on('click', 'a', e => {\n\n        // Jump to the page anno rendered at.\n        let page = $(e.currentTarget).data('page');\n        console.log('page:', page);\n        iframeWindow.PDFView.page = page;\n\n        // Highlight.\n        let id = $(e.currentTarget).data('id');\n        let annotation = iframeWindow.annotationContainer.findById(id);\n        if (annotation) {\n            annotation.highlight();\n            setTimeout(() => {\n                annotation.dehighlight();\n            }, 1000);\n        }\n\n        // Close the dropdown.\n        $('#dropdownAnnoList').click();\n    });\n\n}\n\n/**\n * Get the y position in the annotation.\n */\nfunction _getY(annotation) {\n\n    if (annotation.rectangles) {\n        return annotation.rectangles[0].y;\n\n    } else if (annotation.y1) {\n        return annotation.y1;\n\n    } else {\n        return annotation.y;\n    }\n}\n\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/ui/annoListDropdown.js\n **/","/**\n * The padding of page top.\n */\nconst paddingTop = 9;\n\n/**\n * The padding between pages.\n */\nconst paddingBetweenPages = 9;\n\n/**\n * Convert the `y` position from the local coords to exported json.\n */\nexport function convertToExportY(y) {\n\n    let meta = getPageSize();\n\n    y -= paddingTop;\n\n    let pageHeight = meta.height + paddingBetweenPages;\n\n    let pageNumber = Math.floor(y / pageHeight) + 1;\n    let yInPage = y - (pageNumber-1) * pageHeight;\n\n    return { pageNumber, y : yInPage };\n}\n\n/**\n * Get a page size of a single PDF page.\n */\nfunction getPageSize() {\n\n    let pdfView = window.PDFView || iframeWindow.PDFView;\n\n    let viewBox = pdfView.pdfViewer.getPageView(0).viewport.viewBox;\n    let size = { width : viewBox[2], height : viewBox[3] };\n    return size;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/src/utils/position.js\n **/","/**\n * UI parts - Reference Annotation Dropdown.\n */\nimport { displayAnnotation } from '../util/display';\n\n/**\n * Setup a click action of the Reference Annotation Dropdown.\n */\nexport function setup() {\n\n    $('#dropdownAnnoReference').on('click', 'a', e => {\n\n        let $this = $(e.currentTarget);\n\n        $this.find('.fa-check').toggleClass('no-visible');\n\n        let annoNames = [];\n        $('#dropdownAnnoReference a').each((index, element) => {\n            let $elm = $(element);\n            if ($elm.find('.fa-check').hasClass('no-visible') === false) {\n                annoNames.push($elm.find('.js-annoname').text());\n            }\n        });\n        if (annoNames.length > 0) {\n            $('#dropdownAnnoReference .js-text').text(annoNames.join(','));\n        } else {\n            $('#dropdownAnnoReference .js-text').text('Select reference files');\n        }\n\n        displayAnnotation(false);\n\n        return false;\n\n    });\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/ui/referenceAnnoDropdown.js\n **/","/**\n * UI parts - Annotations Tools.\n */\nimport { reloadPDFViewer } from '../util/display';\nimport { unlistenWindowLeaveEvent } from '../util/window';\n\n\n/**\n    Set the behavior of the tool buttons for annotations.\n*/\nexport function setup() {\n\n    window.annotationToolMode = 'view';\n\n    $('.js-tool-btn').off('click').on('click', (e) => {\n\n        disableAnnotateTools();\n\n        let $button = $(e.currentTarget);\n\n        if ($button.hasClass('active')) {\n            $button\n                .removeClass('active')\n                .blur();\n            return false;\n        }\n\n        $('.js-tool-btn.active').removeClass('active');\n        $button.addClass('active');\n\n        let type = $button.data('type');\n\n        window.annotationToolMode = type;\n\n        if (type === 'span') {\n            window.iframeWindow.PDFAnnoCore.UI.enableSpan();\n\n        } else if (type === 'one-way') {\n            window.iframeWindow.PDFAnnoCore.UI.enableRelation('one-way');\n\n        } else if (type === 'two-way') {\n            window.iframeWindow.PDFAnnoCore.UI.enableRelation('two-way');\n\n        } else if (type === 'link') {\n            window.iframeWindow.PDFAnnoCore.UI.enableRelation('link');\n\n        } else if (type === 'rect') {\n            window.iframeWindow.PDFAnnoCore.UI.enableRect();\n\n        }\n\n        return false;\n    });\n\n    $('.js-tool-btn2').off('click').on('click', (e) => {\n\n        let $button = $(e.currentTarget);\n        let type = $button.data('type');\n\n        $button.blur();\n\n        if (type === 'download') {\n            downloadAnnotation();\n\n        } else if (type === 'delete') {\n            deleteAllAnnotations();\n        }\n\n        return false;\n    });\n\n}\n\n/**\n    Disable annotation tool buttons.\n*/\nfunction disableAnnotateTools() {\n    window.iframeWindow.PDFAnnoCore.UI.disableRect();\n    window.iframeWindow.PDFAnnoCore.UI.disableSpan();\n    window.iframeWindow.PDFAnnoCore.UI.disableRelation();\n    window.iframeWindow.PDFAnnoCore.UI.disableViewMode();\n}\n\n/**\n * Delete all annotations.\n */\nfunction deleteAllAnnotations() {\n\n    // Comfirm to user.\n    let userAnswer = window.confirm('Are you sure to clear the current annotations?');\n    if (!userAnswer) {\n        return;\n    }\n\n    iframeWindow.annotationContainer.destroy();\n\n    let documentId = window.iframeWindow.getFileName(window.iframeWindow.PDFView.url);\n    window.iframeWindow.PDFAnnoCore.getStoreAdapter().deleteAnnotations(documentId).then(() => {\n        reloadPDFViewer();\n    });\n}\n\n/**\n * Export the primary annotation data for download.\n */\nfunction downloadAnnotation() {\n\n    window.iframeWindow.PDFAnnoCore.getStoreAdapter().exportData().then(annotations => {\n        let blob = new Blob([annotations]);\n        let blobURL = window.URL.createObjectURL(blob);\n        let a = document.createElement('a');\n        document.body.appendChild(a); // for firefox working correctly.\n        a.download = _getDownloadFileName();\n        a.href = blobURL;\n        a.click();\n        a.parentNode.removeChild(a);\n    });\n\n    unlistenWindowLeaveEvent();\n}\n\n/**\n * Get the anno file name for download.\n */\nfunction _getDownloadFileName() {\n\n    // The name of Primary Annotation.\n    let primaryAnnotationName;\n    $('#dropdownAnnoPrimary a').each((index, element) => {\n        let $elm = $(element);\n        if ($elm.find('.fa-check').hasClass('no-visible') === false) {\n            primaryAnnotationName = $elm.find('.js-annoname').text();\n        }\n    });\n    if (primaryAnnotationName) {\n        return primaryAnnotationName;\n    }\n\n    // The name of PDF.\n    let pdfFileName = iframeWindow.getFileName(iframeWindow.PDFView.url);\n    return pdfFileName.split('.')[0] + '.anno';\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/ui/annotationTools.js\n **/","/**\n * Utility for window.\n */\n\n/**\n * Set the confirm dialog at leaving the page.\n */\nexport function listenWindowLeaveEvent() {\n    $(window).off('beforeunload').on('beforeunload', () => {\n        return 'You don\\'t save the annotations yet.\\nAre you sure to leave ?';\n    });\n}\n\n/**\n * Unset the confirm dialog at leaving the page.\n */\nexport function unlistenWindowLeaveEvent() {\n    $(window).off('beforeunload');\n}\n\n/**\n * Resize the height of elements adjusting to the window.\n */\nexport function resizeHandler() {\n\n    // PDFViewer.\n    let height = $(window).innerHeight() - $('#viewer').offset().top;\n    $('#viewer iframe').css('height', `${height}px`);\n\n    // Dropdown for PDF.\n    let height1 = $(window).innerHeight() - ($('#dropdownPdf ul').offset().top || 120);\n    $('#dropdownPdf ul').css('max-height', `${height1 - 20}px`);\n\n    // Dropdown for Primary Annos.\n    let height2 = $(window).innerHeight() - ($('#dropdownAnnoPrimary ul').offset().top || 120);\n    $('#dropdownAnnoPrimary ul').css('max-height', `${height2 - 20}px`);\n\n    // Dropdown for Anno list.\n    let height3 = $(window).innerHeight() - ($('#dropdownAnnoList ul').offset().top || 120);\n    $('#dropdownAnnoList ul').css('max-height', `${height3 - 20}px`);\n\n    // Dropdown for Reference Annos.\n    let height4 = $(window).innerHeight() - ($('#dropdownAnnoReference ul').offset().top || 120);\n    $('#dropdownAnnoReference ul').css('max-height', `${height4 - 20}px`);\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/util/window.js\n **/","module.exports = __webpack_public_path__ + \"dist/index.html\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/file-loader?name=dist/index.html!./src/index.html\n ** module id = 10\n ** module chunks = 0\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../node_modules/css-loader/index.js!./pdfanno.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../node_modules/css-loader/index.js!./pdfanno.css\", function() {\n\t\t\tvar newContent = require(\"!!./../node_modules/css-loader/index.js!./pdfanno.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/style-loader!./~/css-loader!./src/pdfanno.css\n ** module id = 11\n ** module chunks = 0\n **/","exports = module.exports = require(\"./../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"@charset 'utf-8';\\n\\n.no-visible {\\n    visibility: hidden;\\n}\\n\\n/**\\n * Viewer size.\\n * This height will be override to fit the browser height (by app.js).\\n */\\n.anno-viewer {\\n    width: 100%;\\n    height: 500px;\\n}\\n\\n/**\\n * Annotation Select UI Layout.\\n */\\n.anno-select-layout {}\\n.anno-select-layout .row:first-child {\\n    margin-bottom: 10px;\\n}\\n.anno-select-layout [type=\\\"radio\\\"] {\\n    margin-right: 5px;\\n}\\n.anno-select-layout [type=\\\"file\\\"] {\\n    display: inline-block;\\n    margin-left: 5px;\\n    line-height: 1em;\\n}\\n.anno-select-layout .sp-replacer {\\n    padding: 0;\\n    border: none;\\n}\\n.anno-select-layout .sp-dd {\\n    display: none;\\n}\\n\\n/**\\n * Dropdown.\\n */\\n.dropdown-menu {\\n    overflow: scroll;\\n}\\n\\n/**\\n * Color picker.\\n */\\n.anno-ui .sp-replacer {\\n    padding: 0;\\n    border: none;\\n}\\n.anno-ui .sp-dd {\\n    display: none;\\n}\\n.anno-ui .sp-preview {\\n    margin-right: 0;\\n}\\n\\n\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./src/pdfanno.css\n ** module id = 12\n ** module chunks = 0\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\nmodule.exports = function() {\r\n\tvar list = [];\r\n\r\n\t// return the list of modules as css string\r\n\tlist.toString = function toString() {\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar item = this[i];\r\n\t\t\tif(item[2]) {\r\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.join(\"\");\r\n\t};\r\n\r\n\t// import a list of modules into the list\r\n\tlist.i = function(modules, mediaQuery) {\r\n\t\tif(typeof modules === \"string\")\r\n\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\tvar alreadyImportedModules = {};\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar id = this[i][0];\r\n\t\t\tif(typeof id === \"number\")\r\n\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t}\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar item = modules[i];\r\n\t\t\t// skip already imported module\r\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn list;\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader/lib/css-base.js\n ** module id = 13\n ** module chunks = 0 1\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar stylesInDom = {},\r\n\tmemoize = function(fn) {\r\n\t\tvar memo;\r\n\t\treturn function () {\r\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\treturn memo;\r\n\t\t};\r\n\t},\r\n\tisOldIE = memoize(function() {\r\n\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t}),\r\n\tgetHeadElement = memoize(function () {\r\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t}),\r\n\tsingletonElement = null,\r\n\tsingletonCounter = 0,\r\n\tstyleElementsInsertedAtTop = [];\r\n\r\nmodule.exports = function(list, options) {\r\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\r\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t}\r\n\r\n\toptions = options || {};\r\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t// tags it will allow on a page\r\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\r\n\t// By default, add <style> tags to the bottom of <head>.\r\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\r\n\r\n\tvar styles = listToStyles(list);\r\n\taddStylesToDom(styles, options);\r\n\r\n\treturn function update(newList) {\r\n\t\tvar mayRemove = [];\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tdomStyle.refs--;\r\n\t\t\tmayRemove.push(domStyle);\r\n\t\t}\r\n\t\tif(newList) {\r\n\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\taddStylesToDom(newStyles, options);\r\n\t\t}\r\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction addStylesToDom(styles, options) {\r\n\tfor(var i = 0; i < styles.length; i++) {\r\n\t\tvar item = styles[i];\r\n\t\tvar domStyle = stylesInDom[item.id];\r\n\t\tif(domStyle) {\r\n\t\t\tdomStyle.refs++;\r\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t}\r\n\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar parts = [];\r\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction listToStyles(list) {\r\n\tvar styles = [];\r\n\tvar newStyles = {};\r\n\tfor(var i = 0; i < list.length; i++) {\r\n\t\tvar item = list[i];\r\n\t\tvar id = item[0];\r\n\t\tvar css = item[1];\r\n\t\tvar media = item[2];\r\n\t\tvar sourceMap = item[3];\r\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\tif(!newStyles[id])\r\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\telse\r\n\t\t\tnewStyles[id].parts.push(part);\r\n\t}\r\n\treturn styles;\r\n}\r\n\r\nfunction insertStyleElement(options, styleElement) {\r\n\tvar head = getHeadElement();\r\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\r\n\tif (options.insertAt === \"top\") {\r\n\t\tif(!lastStyleElementInsertedAtTop) {\r\n\t\t\thead.insertBefore(styleElement, head.firstChild);\r\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\r\n\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\r\n\t\t} else {\r\n\t\t\thead.appendChild(styleElement);\r\n\t\t}\r\n\t\tstyleElementsInsertedAtTop.push(styleElement);\r\n\t} else if (options.insertAt === \"bottom\") {\r\n\t\thead.appendChild(styleElement);\r\n\t} else {\r\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\r\n\t}\r\n}\r\n\r\nfunction removeStyleElement(styleElement) {\r\n\tstyleElement.parentNode.removeChild(styleElement);\r\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\r\n\tif(idx >= 0) {\r\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\r\n\t}\r\n}\r\n\r\nfunction createStyleElement(options) {\r\n\tvar styleElement = document.createElement(\"style\");\r\n\tstyleElement.type = \"text/css\";\r\n\tinsertStyleElement(options, styleElement);\r\n\treturn styleElement;\r\n}\r\n\r\nfunction createLinkElement(options) {\r\n\tvar linkElement = document.createElement(\"link\");\r\n\tlinkElement.rel = \"stylesheet\";\r\n\tinsertStyleElement(options, linkElement);\r\n\treturn linkElement;\r\n}\r\n\r\nfunction addStyle(obj, options) {\r\n\tvar styleElement, update, remove;\r\n\r\n\tif (options.singleton) {\r\n\t\tvar styleIndex = singletonCounter++;\r\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\r\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t} else if(obj.sourceMap &&\r\n\t\ttypeof URL === \"function\" &&\r\n\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\ttypeof Blob === \"function\" &&\r\n\t\ttypeof btoa === \"function\") {\r\n\t\tstyleElement = createLinkElement(options);\r\n\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t\tif(styleElement.href)\r\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t};\r\n\t} else {\r\n\t\tstyleElement = createStyleElement(options);\r\n\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t};\r\n\t}\r\n\r\n\tupdate(obj);\r\n\r\n\treturn function updateStyle(newObj) {\r\n\t\tif(newObj) {\r\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\treturn;\r\n\t\t\tupdate(obj = newObj);\r\n\t\t} else {\r\n\t\t\tremove();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nvar replaceText = (function () {\r\n\tvar textStore = [];\r\n\r\n\treturn function (index, replacement) {\r\n\t\ttextStore[index] = replacement;\r\n\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t};\r\n})();\r\n\r\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\tvar css = remove ? \"\" : obj.css;\r\n\r\n\tif (styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t} else {\r\n\t\tvar cssNode = document.createTextNode(css);\r\n\t\tvar childNodes = styleElement.childNodes;\r\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\tif (childNodes.length) {\r\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t} else {\r\n\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction applyToTag(styleElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\r\n\tif(media) {\r\n\t\tstyleElement.setAttribute(\"media\", media)\r\n\t}\r\n\r\n\tif(styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = css;\r\n\t} else {\r\n\t\twhile(styleElement.firstChild) {\r\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t}\r\n\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t}\r\n}\r\n\r\nfunction updateLink(linkElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(sourceMap) {\r\n\t\t// http://stackoverflow.com/a/26603875\r\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t}\r\n\r\n\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\r\n\tvar oldSrc = linkElement.href;\r\n\r\n\tlinkElement.href = URL.createObjectURL(blob);\r\n\r\n\tif(oldSrc)\r\n\t\tURL.revokeObjectURL(oldSrc);\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/style-loader/addStyles.js\n ** module id = 14\n ** module chunks = 0 1\n **/"],"sourceRoot":""}